[
  {
    "id": "5bad3bacfa278b0c",
    "type": "tab",
    "label": "Data Send API",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "ecc1ed326b3511ce",
    "type": "tab",
    "label": "Database",
    "disabled": false,
    "info": "1. 저온 창고의 냉장, 냉동 온도 테이터\r\n\r\n2. 사각 유탕기, 강정 유탕기, 컨베이어 유탕기\r\n   온도 데이터\r\n\r\n3. 금속 검출기 데이터\r\n\r\n※1,2,3 데이터 MySQL DB에 저장",
    "env": []
  },
  {
    "id": "37434fc821a5ec73",
    "type": "tab",
    "label": "TEST",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "edfcbce253259273",
    "type": "tab",
    "label": "플로우 2",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "8ea4664f289b895d",
    "type": "serial-port",
    "serialport": "COM8",
    "serialbaud": "9600",
    "databits": "8",
    "parity": "none",
    "stopbits": "1",
    "waitfor": "",
    "dtr": "none",
    "rts": "none",
    "cts": "none",
    "dsr": "none",
    "newline": "500",
    "bin": "bin",
    "out": "time",
    "addchar": "",
    "responsetimeout": "10000"
  },
  {
    "id": "dd435157a6d5c335",
    "type": "MySQLdatabase",
    "name": "",
    "host": "127.0.0.1",
    "port": "3306",
    "db": "fz_shm",
    "tz": "",
    "charset": "UTF8"
  },
  {
    "id": "ad6058ecb240f607",
    "type": "MySQLdatabase",
    "name": "",
    "host": "127.0.0.1",
    "port": "3306",
    "db": "fz_shm",
    "tz": "",
    "charset": "UTF8"
  },
  {
    "id": "2256a29e05027173",
    "type": "modbus-client",
    "name": "",
    "clienttype": "simpleser",
    "bufferCommands": true,
    "stateLogEnabled": false,
    "queueLogEnabled": false,
    "failureLogEnabled": true,
    "tcpHost": "127.0.0.1",
    "tcpPort": "502",
    "tcpType": "DEFAULT",
    "serialPort": "COM9",
    "serialType": "RTU-BUFFERD",
    "serialBaudrate": "9600",
    "serialDatabits": "8",
    "serialStopbits": "1",
    "serialParity": "none",
    "serialConnectionDelay": "100",
    "serialAsciiResponseStartDelimiter": "0x3A",
    "unit_id": 1,
    "commandDelay": 1,
    "clientTimeout": 1000,
    "reconnectOnTimeout": true,
    "reconnectTimeout": 2000,
    "parallelUnitIdsAllowed": true,
    "showWarnings": true,
    "showLogs": true
  },
  {
    "id": "213d0c20572925ff",
    "type": "inject",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 9999,
    "y": 9990,
    "wires": [
      []
    ]
  },
  {
    "id": "022011fc23cada25",
    "type": "inject",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "540",
    "crontab": "",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 480,
    "wires": [
      [
        "fa73633418dca05c"
      ]
    ]
  },
  {
    "id": "fa73633418dca05c",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "Select Query",
    "func": "msg.topic = \"SELECT adr, temp FROM fz_shm.fridge WHERE date BETWEEN date_add(now(), interval -60 second) AND now() ORDER BY date DESC LIMIT 1;\";\n\n//msg.topic = \"SELECT adr, temp FROM fz_shm.fridge ORDER BY date DESC LIMIT 1;\";\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 310,
    "y": 480,
    "wires": [
      [
        "0d34504ec2e65637"
      ]
    ]
  },
  {
    "id": "7a22300d31bd8ddb",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 1",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 500,
    "y": 540,
    "wires": []
  },
  {
    "id": "c96fc28ca316047c",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "냉장실 send api",
    "func": "var adr = msg.payload[0].adr;\nvar temp = msg.payload[0].temp;\n\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0056\",\n    \"kind\": \"4\",\n    \"deviceId\": '1',\n    \"temperature\": temp,\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 140,
    "y": 540,
    "wires": [
      [
        "c04f39197f0a12e9",
        "ef5bc4220d2ab986"
      ]
    ]
  },
  {
    "id": "f27b20d9888690b7",
    "type": "inject",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "540",
    "crontab": "",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 640,
    "wires": [
      [
        "6c13ad293af6a859"
      ]
    ]
  },
  {
    "id": "ef5bc4220d2ab986",
    "type": "http request",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0056/get_temperature",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 330,
    "y": 540,
    "wires": [
      [
        "7a22300d31bd8ddb"
      ]
    ]
  },
  {
    "id": "68cb1a91ade5ca96",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 5",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 820,
    "y": 160,
    "wires": []
  },
  {
    "id": "3385796e5f5bf14a",
    "type": "tcp in",
    "z": "5bad3bacfa278b0c",
    "d": true,
    "name": "",
    "server": "server",
    "host": "",
    "port": "5001",
    "datamode": "stream",
    "datatype": "buffer",
    "newline": "",
    "topic": "",
    "trim": false,
    "base64": false,
    "tls": "",
    "x": 100,
    "y": 880,
    "wires": [
      [
        "ae118a034a6cedd1"
      ]
    ]
  },
  {
    "id": "ae118a034a6cedd1",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "function 5",
    "func": "var ccode = \"0056\";\nvar scode = \"91\";\nvar type = \"2\";\nvar res = msg.payload;\n\nvar paseData = new Array();\nfor (var i = 0; i < res.length; i++) {\n    paseData[i] = String.fromCharCode(res[i]);\n}\n\nvar detected = false;\n\nif (type == \"1\" && (res.length % 34) == 0) {\n    // 나우시스템즈\n    if (paseData[0] == ' ' && paseData[32] == '\\r' && paseData[33] == '\\n') {\n        if ((paseData[1] + paseData[2]) == \"80\" || (paseData[1] + paseData[2]) == \"81\") {\n            detected = true;\n        }\n    }\n\n} else if (type == \"1\" && ((res.length % 23) == 0 || (res.length % 24) == 0)) {\n    if (paseData[0] == 'R' && paseData[1] == 'E' && paseData[2] == 'J') {\n        detected = true;\n    }\n\n} else if (type == \"2\" && (res.length % 6) == 0) {\n    if (paseData[0] == '\\u0002' && paseData[5] == '\\u0003') {\n        if (paseData[3] == \"1\") {\n            detected = true;\n        }\n    }\n\n} else if (type == \"3\" && (res.length % 11) == 0) {\n    for (var i = 1; i <= (res.length / 11); i++) {\n        if (paseData[(i * 11 - 1)] == \"\\u0001\") {\n            detected = true;\n        }\n    }\n\n}\n\nif (detected) {\n\n    msg.headers = {};\n    msg.headers['content-type'] = \"application/json\";\n    msg.headers['Accept'] = \"application/json\";\n\n    msg.payload = {\n        \"ccode\": ccode,\n        \"scode\": scode\n    };\n\n    return msg;\n}",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 260,
    "y": 880,
    "wires": [
      [
        "e3a0627b140d88d2"
      ]
    ]
  },
  {
    "id": "e3a0627b140d88d2",
    "type": "http request",
    "z": "5bad3bacfa278b0c",
    "d": true,
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0056/get_detection",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 430,
    "y": 880,
    "wires": [
      [
        "d0776bea22c4b153"
      ]
    ]
  },
  {
    "id": "d0776bea22c4b153",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 9",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 620,
    "y": 880,
    "wires": []
  },
  {
    "id": "cf1bce674ce6f5df",
    "type": "comment",
    "z": "5bad3bacfa278b0c",
    "name": "금속검출기 before",
    "info": "",
    "x": 130,
    "y": 840,
    "wires": []
  },
  {
    "id": "6d6f66fa36821ea9",
    "type": "http request",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0056/get_heating",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 830,
    "y": 220,
    "wires": [
      [
        "2defc0993d2b74d6"
      ]
    ]
  },
  {
    "id": "94bc8deb64d9de35",
    "type": "inject",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "15",
    "crontab": "",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 100,
    "wires": [
      [
        "ac38dc75f11ec7ac"
      ]
    ]
  },
  {
    "id": "ac38dc75f11ec7ac",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "Select Query",
    "func": "msg.topic = \"SELECT temp1, temp2, temp3, temp4, temp5 FROM fz_shm.fryer WHERE date BETWEEN date_add(now(), interval -60 second) AND now() ORDER BY date DESC LIMIT 1;\";\n\n//msg.topic = \"SELECT * FROM fz_shm.fryer ORDER BY date DESC LIMIT 1;\";\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 170,
    "y": 180,
    "wires": [
      [
        "102953bd26f7712b"
      ]
    ]
  },
  {
    "id": "102953bd26f7712b",
    "type": "mysql",
    "z": "5bad3bacfa278b0c",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 320,
    "y": 180,
    "wires": [
      [
        "b691a67e752aa8b6",
        "7301f41b7dcb5927",
        "3b4974d2d7cd5e38",
        "f9e9a57ceecaa16a",
        "8116962c50b3a15a",
        "297ce861584a60e9"
      ]
    ]
  },
  {
    "id": "f9e9a57ceecaa16a",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "온도장치_4 send api",
    "func": "// 가열(유탕)공정[기존+컨베이어 유탕기, scode : 94], 1차 가열 온도(h_type : 1)\nvar temp4 = msg.payload[0].temp4;\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0056\",\n    \"scode\": \"94\",\n    \"h_type\": \"1\",\n    \"temperature\": temp4\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 560,
    "y": 300,
    "wires": [
      [
        "68cb1a91ade5ca96",
        "6d6f66fa36821ea9"
      ]
    ]
  },
  {
    "id": "8116962c50b3a15a",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "온도장치_5 send api",
    "func": "// 가열(유탕)공정[사각유탕기, scode : 92], 2차 가열 온도(h_type : 2)\nvar temp5 = msg.payload[0].temp5;\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0056\",\n    \"scode\": \"92\",\n    \"h_type\": \"2\",\n    \"temperature\": temp5\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 560,
    "y": 360,
    "wires": [
      [
        "68cb1a91ade5ca96",
        "6d6f66fa36821ea9"
      ]
    ]
  },
  {
    "id": "7301f41b7dcb5927",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "온도장치_2 send api",
    "func": "// 가열(유탕)공정[강정유탕기, scode : 93], 2차 가열 온도(h_type : 2)\nvar temp2 = msg.payload[0].temp2;\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0056\",\n    \"scode\": \"93\",\n    \"h_type\": \"2\",\n    \"temperature\": temp2\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 560,
    "y": 120,
    "wires": [
      [
        "68cb1a91ade5ca96",
        "6d6f66fa36821ea9"
      ]
    ]
  },
  {
    "id": "3b4974d2d7cd5e38",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "온도장치_3 send api",
    "func": "// 가열(유탕)공정[기존+컨베이어 유탕기, scode : 94], 2차 가열 온도(h_type : 2)\nvar temp3 = msg.payload[0].temp3;\n\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0056\",\n    \"scode\": \"94\",\n    \"h_type\": \"2\",\n    \"temperature\": temp3\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 560,
    "y": 180,
    "wires": [
      [
        "68cb1a91ade5ca96",
        "6d6f66fa36821ea9"
      ]
    ]
  },
  {
    "id": "b691a67e752aa8b6",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "온도장치_1 send api",
    "func": "// 가열(유탕)공정[강정유탕기, scode : 93], 1차 가열 온도(h_type : 1)\nvar temp1 = msg.payload[0].temp1;\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0056\",\n    \"scode\": \"93\",\n    \"h_type\": \"1\",\n    \"temperature\": temp1\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 560,
    "y": 60,
    "wires": [
      [
        "68cb1a91ade5ca96",
        "6d6f66fa36821ea9"
      ]
    ]
  },
  {
    "id": "297ce861584a60e9",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "온도장치_4 send api",
    "func": "// 가열(유탕)공정[사각유탕기, scode : 92], 1차 가열 온도(h_type : 1)\nvar temp4 = msg.payload[0].temp4;\n\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0056\",\n    \"scode\": \"92\",\n    \"h_type\": \"1\",\n    \"temperature\": temp4\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 560,
    "y": 240,
    "wires": [
      [
        "68cb1a91ade5ca96",
        "6d6f66fa36821ea9"
      ]
    ]
  },
  {
    "id": "2defc0993d2b74d6",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 14",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 880,
    "y": 280,
    "wires": []
  },
  {
    "id": "330e2457c1dab871",
    "type": "comment",
    "z": "5bad3bacfa278b0c",
    "name": "저온창고 [냉장/냉동]",
    "info": "",
    "x": 130,
    "y": 440,
    "wires": []
  },
  {
    "id": "2b631623a50f052e",
    "type": "comment",
    "z": "5bad3bacfa278b0c",
    "name": "가열(유탕)공정",
    "info": "1. 사각유탕기 : 국번 4번(1차), 5번(2차)\n\n2. 강정유탕기 : 국번 1번(1차), 2번(2차)\n\n3. 기존+컨베이어 유탕기 : 국번 4번(1차), 3번(2차)",
    "x": 120,
    "y": 60,
    "wires": []
  },
  {
    "id": "0d34504ec2e65637",
    "type": "mysql",
    "z": "5bad3bacfa278b0c",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 480,
    "y": 480,
    "wires": [
      [
        "c96fc28ca316047c"
      ]
    ]
  },
  {
    "id": "c04f39197f0a12e9",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 20",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 320,
    "y": 580,
    "wires": []
  },
  {
    "id": "6c13ad293af6a859",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "Select Query",
    "func": "msg.topic = \"SELECT adr, temp FROM fz_shm.freezer WHERE date BETWEEN date_add(now(), interval -60 second) AND now() ORDER BY date DESC LIMIT 1;\";\n\n//msg.topic = \"SELECT adr, temp FROM fz_shm.freezer ORDER BY date DESC LIMIT 1;\";\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 310,
    "y": 640,
    "wires": [
      [
        "409dc207692924f4"
      ]
    ]
  },
  {
    "id": "409dc207692924f4",
    "type": "mysql",
    "z": "5bad3bacfa278b0c",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 480,
    "y": 640,
    "wires": [
      [
        "a89200b63e2d2ddc"
      ]
    ]
  },
  {
    "id": "a89200b63e2d2ddc",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "냉동실 send api",
    "func": "var adr = msg.payload[0].adr;\nvar temp = msg.payload[0].temp;\n\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0056\",\n    \"kind\": \"4\",\n    \"deviceId\": \"2\",\n    \"temperature\": temp,\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 140,
    "y": 700,
    "wires": [
      [
        "34ae2dcf7d0a2c1a",
        "ab2d598b234c3882"
      ]
    ]
  },
  {
    "id": "ab2d598b234c3882",
    "type": "http request",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0056/get_temperature",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 330,
    "y": 700,
    "wires": [
      [
        "0b6aba59e21b3a97"
      ]
    ]
  },
  {
    "id": "0b6aba59e21b3a97",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 25",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 500,
    "y": 700,
    "wires": []
  },
  {
    "id": "34ae2dcf7d0a2c1a",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 26",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 320,
    "y": 740,
    "wires": []
  },
  {
    "id": "56e5e275c6bf54e7",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "모든다해 파싱",
    "func": "const data = msg.payload;\n\nvar ccode = \"0056\"; // 거래처코드\nvar scode = \"91\"; // 장비 코드\nvar dataLen = data.length;\nvar send = false;\n\nconst STX = data[0];\nconst ETX = data[data.length-1];\nvar productNo = parseInt(String.fromCharCode(data[1], data[2]));\nvar detected = parseInt(String.fromCharCode(data[3]));\n\nif (STX == 2 && ETX == 3 && dataLen == 6 && detected == 1) {\n    /* STX가 2, ETX가 3, 데이터길이가 6, 검출신호가 1 */\n    send = true;\n} else {\n    return;\n}\n\n\nif (send) {\n    /* MySQL */\n    var db = 'fz_shm';\n    var table = 'detector';\n\n    var query = \" insert into \" + db + \".\" + table + \"(productNo, detected) \";\n    query += \"values('\" + productNo + \"', '\" + detected + \"')\";\n    msg.topic = query;\n\n\n    /* API Send */\n    msg.headers = {};\n    msg.headers['content-type'] = \"application/json\";\n    msg.headers['Accept'] = \"application/json\";\n\n    msg.payload = {\n        \"ccode\": ccode,\n        \"scode\": scode\n    };\n\n    return msg;\n}\n\n\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 280,
    "y": 1040,
    "wires": [
      [
        "f7cfb557f831f2fc",
        "8919b59e22d2c6b2"
      ]
    ]
  },
  {
    "id": "f7cfb557f831f2fc",
    "type": "mysql",
    "z": "5bad3bacfa278b0c",
    "mydb": "ad6058ecb240f607",
    "name": "MySQL",
    "x": 540,
    "y": 1060,
    "wires": [
      [
        "1b53bf1cecb301cf"
      ]
    ]
  },
  {
    "id": "1df7205b232cb933",
    "type": "inject",
    "z": "5bad3bacfa278b0c",
    "name": "일요일 01시",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 01 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 110,
    "y": 1140,
    "wires": [
      [
        "17a87bc5db3e9a51"
      ]
    ]
  },
  {
    "id": "17a87bc5db3e9a51",
    "type": "function",
    "z": "5bad3bacfa278b0c",
    "name": "테이블 내용 삭제",
    "func": "const db = 'fz_shm';\nconst table = 'detector';\nconst query =  `truncate table ${db}.${table};`;\n\nmsg.topic = query;\nmsg.payload = '금속검출기 데이터베이스 내용 삭제';\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 330,
    "y": 1140,
    "wires": [
      [
        "1ba62bfc4af3b8e9",
        "f9545d613b930cbc"
      ]
    ]
  },
  {
    "id": "1ba62bfc4af3b8e9",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 31",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 540,
    "y": 1140,
    "wires": []
  },
  {
    "id": "f9545d613b930cbc",
    "type": "mysql",
    "z": "5bad3bacfa278b0c",
    "mydb": "ad6058ecb240f607",
    "name": "MySQL",
    "x": 540,
    "y": 1180,
    "wires": [
      []
    ]
  },
  {
    "id": "fae9b41efbe186f5",
    "type": "comment",
    "z": "5bad3bacfa278b0c",
    "name": "금속검출기 after",
    "info": "",
    "x": 120,
    "y": 960,
    "wires": []
  },
  {
    "id": "1b53bf1cecb301cf",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 32",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 700,
    "y": 1060,
    "wires": []
  },
  {
    "id": "8919b59e22d2c6b2",
    "type": "http request",
    "z": "5bad3bacfa278b0c",
    "name": "API SEND",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0056/get_detection",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 550,
    "y": 1020,
    "wires": [
      [
        "af7bec5a0b621d96"
      ]
    ]
  },
  {
    "id": "af7bec5a0b621d96",
    "type": "debug",
    "z": "5bad3bacfa278b0c",
    "name": "debug 33",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 720,
    "y": 1020,
    "wires": []
  },
  {
    "id": "8e6000bc32ebb7ba",
    "type": "inject",
    "z": "5bad3bacfa278b0c",
    "name": "검출 테스트",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "[2, 48, 49, 49, 50, 3]",
    "payloadType": "bin",
    "x": 110,
    "y": 1100,
    "wires": [
      [
        "56e5e275c6bf54e7"
      ]
    ]
  },
  {
    "id": "5de47273d0e5b6c4",
    "type": "file",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "filename": "C:\\fzone\\ot\\detector_logs\\log.txt",
    "filenameType": "str",
    "appendNewline": true,
    "createDir": true,
    "overwriteFile": "false",
    "encoding": "utf8",
    "x": 330,
    "y": 1000,
    "wires": [
      []
    ]
  },
  {
    "id": "09e403a3953dce7b",
    "type": "tcp in",
    "z": "5bad3bacfa278b0c",
    "name": "",
    "server": "server",
    "host": "",
    "port": "5001",
    "datamode": "stream",
    "datatype": "buffer",
    "newline": "",
    "topic": "",
    "trim": false,
    "base64": false,
    "tls": "",
    "x": 100,
    "y": 1040,
    "wires": [
      [
        "56e5e275c6bf54e7"
      ]
    ]
  },
  {
    "id": "dfcf07b1cc458210",
    "type": "inject",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "10",
    "crontab": "",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 120,
    "wires": [
      [
        "6b3a4e9730c4580f"
      ]
    ]
  },
  {
    "id": "6b3a4e9730c4580f",
    "type": "modbus-getter",
    "z": "ecc1ed326b3511ce",
    "name": "온도장치_1",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "1",
    "dataType": "InputRegister",
    "adr": "1000",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 120,
    "wires": [
      [
        "38a3b09bfe602264"
      ],
      []
    ]
  },
  {
    "id": "7afb8051a2671c0c",
    "type": "modbus-getter",
    "z": "ecc1ed326b3511ce",
    "name": "온도장치_2",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "2",
    "dataType": "InputRegister",
    "adr": "1000",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 220,
    "wires": [
      [
        "efe6ef6f6320ec3c"
      ],
      []
    ]
  },
  {
    "id": "aa351f4681a6da6b",
    "type": "modbus-getter",
    "z": "ecc1ed326b3511ce",
    "name": "온도장치_3",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "3",
    "dataType": "InputRegister",
    "adr": "1000",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 340,
    "wires": [
      [
        "0dca745d4dae1fb7"
      ],
      []
    ]
  },
  {
    "id": "eb0c1b2a1489fe1d",
    "type": "modbus-getter",
    "z": "ecc1ed326b3511ce",
    "name": "온도장치_4",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "4",
    "dataType": "InputRegister",
    "adr": "100",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 460,
    "wires": [
      [
        "472fabf81729a583"
      ],
      []
    ]
  },
  {
    "id": "945b478d94cba175",
    "type": "modbus-getter",
    "z": "ecc1ed326b3511ce",
    "name": "온도장치_5",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "5",
    "dataType": "InputRegister",
    "adr": "100",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 580,
    "wires": [
      [
        "d33154de7e6e1b56"
      ],
      []
    ]
  },
  {
    "id": "569a6a7268e1e26e",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "강정유탕기 , 1차 온도(오토닉스 tk4s), 국번1",
    "info": "",
    "x": 210,
    "y": 80,
    "wires": []
  },
  {
    "id": "50d79a171d6e7586",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "강정유탕기 , 2차 온도(오토닉스 tk4s), 국번2",
    "info": "",
    "x": 210,
    "y": 180,
    "wires": []
  },
  {
    "id": "ac5c11640df77bf4",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "기존+컨베이어 유탕기, 2차 온도(오토닉스 tk4s),  국번3",
    "info": "",
    "x": 240,
    "y": 280,
    "wires": []
  },
  {
    "id": "54eff31d3dfb95c5",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "사각유탕기, 기존+컨베이어 유탕기 1차 온도(코노텍 TPI),  국번4",
    "info": "",
    "x": 270,
    "y": 400,
    "wires": []
  },
  {
    "id": "c8f884b74d082555",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "사각유탕기, 2차 온도(코노텍 TPI),  국번5",
    "info": "",
    "x": 200,
    "y": 520,
    "wires": []
  },
  {
    "id": "17c6d6093e8e9f5d",
    "type": "mysql",
    "z": "ecc1ed326b3511ce",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 940,
    "y": 440,
    "wires": [
      [
        "1895befb1e74480f"
      ]
    ]
  },
  {
    "id": "482b22b3774d8cf3",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 11",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 1000,
    "y": 360,
    "wires": []
  },
  {
    "id": "472fabf81729a583",
    "type": "delay",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 460,
    "y": 460,
    "wires": [
      [
        "945b478d94cba175",
        "1ce5841426f0055b"
      ]
    ]
  },
  {
    "id": "9b45aaaddf402545",
    "type": "join",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "mode": "custom",
    "build": "array",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "5",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 850,
    "y": 260,
    "wires": [
      [
        "dbecda0b4d726822"
      ]
    ],
    "info": "'메시지 송신 : 지정수의 메세지파트를 수신 후'\r\n숫자 입력할 때 입력 받는 개수 정확하게 입력해야 출력됨.\r\n\r\n입력 노드 5개면 5으로 작성해줘야한다."
  },
  {
    "id": "dbecda0b4d726822",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "Insert DB",
    "func": "var temp1 = \"\";\nvar temp2 = \"\";\nvar temp3 = \"\";\nvar temp4 = \"\";\nvar temp5 = \"\";\n\nfor (let i = 0; i < 5; i++) {\n    const deviceId = msg.payload[i][0];\n    const value = msg.payload[i][1];\n\n    switch (deviceId) {\n        case 1:\n            temp1 = value;\n            break;\n\n        case 2:\n            temp2 = value;\n            break;\n\n        case 3:\n            temp3 = value;\n            break;\n\n        case 4:\n            temp4 = value / 10;\n            break;\n\n        case 5:\n            temp5 = value / 10;\n            break;\n    }\n}\n\nmsg.payload = {\n    \"온도장치_1\": temp1,\n    \"온도장치_2\": temp2,\n    \"온도장치_3\": temp3,\n    \"온도장치_4\": temp4,\n    \"온도장치_5\": temp5\n};\n\nmsg.topic = \"insert into fryer(temp1, temp2, temp3, temp4, temp5) values ('\"+temp1+\"','\"+temp2+\"','\"+temp3+\"','\"+temp4+\"','\"+temp5+\"')\";\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 840,
    "y": 360,
    "wires": [
      [
        "17c6d6093e8e9f5d",
        "482b22b3774d8cf3"
      ]
    ]
  },
  {
    "id": "38a3b09bfe602264",
    "type": "delay",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 460,
    "y": 120,
    "wires": [
      [
        "7afb8051a2671c0c",
        "ca7d6ced8ea42118"
      ]
    ]
  },
  {
    "id": "efe6ef6f6320ec3c",
    "type": "delay",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 460,
    "y": 220,
    "wires": [
      [
        "aa351f4681a6da6b",
        "421489e22dc5b3eb"
      ]
    ]
  },
  {
    "id": "0dca745d4dae1fb7",
    "type": "delay",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 460,
    "y": 340,
    "wires": [
      [
        "eb0c1b2a1489fe1d",
        "64fcb06836a1edc3"
      ]
    ]
  },
  {
    "id": "60b10adcbb60a003",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "※ Data Insert",
    "info": "1. 사각유탕기 : 국번 4번(1차), 5번(2차)\n\n2. 강정유탕기 : 국번 1번(1차), 2번(2차)\n\n3. 기존+컨베이어 유탕기 : 국번 4번(1차), 3번(2차)",
    "x": 110,
    "y": 40,
    "wires": []
  },
  {
    "id": "ad40620ea8e3f3ea",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "※ Data Delete",
    "info": "",
    "x": 110,
    "y": 1160,
    "wires": []
  },
  {
    "id": "615713183fc709ed",
    "type": "inject",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "01 00 * * *",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 1200,
    "wires": [
      [
        "cf164c5c1cb26b69"
      ]
    ]
  },
  {
    "id": "cf164c5c1cb26b69",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "유탕기 테이블",
    "func": "// 현재 날짜에서 30일 초과한 데이터 삭제\nmsg.topic = \"DELETE FROM fz_shm.fryer WHERE date <= DATE_SUB(NOW(), INTERVAL 30 DAY);\"\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 320,
    "y": 1200,
    "wires": [
      [
        "8603b9b0d6405be6"
      ]
    ]
  },
  {
    "id": "8603b9b0d6405be6",
    "type": "mysql",
    "z": "ecc1ed326b3511ce",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 500,
    "y": 1200,
    "wires": [
      [
        "e7103debec3e53eb"
      ]
    ]
  },
  {
    "id": "e7103debec3e53eb",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 15",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 660,
    "y": 1200,
    "wires": []
  },
  {
    "id": "1895befb1e74480f",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 16",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 1080,
    "y": 440,
    "wires": []
  },
  {
    "id": "2a68eb4b5bbde8b1",
    "type": "inject",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "60",
    "crontab": "",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 980,
    "wires": [
      [
        "c38c471af3f07472"
      ]
    ]
  },
  {
    "id": "c38c471af3f07472",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "냉동실_query",
    "func": "msg.payload = Buffer.from([2, 48, 49, 82, 88, 84, 80, 48, 3, 62]);\n\nnode.send(msg);",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 980,
    "wires": [
      [
        "59da47a424318d2f"
      ]
    ]
  },
  {
    "id": "59da47a424318d2f",
    "type": "serial request",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "serial": "8ea4664f289b895d",
    "x": 470,
    "y": 980,
    "wires": [
      [
        "9f76a96d9d028e11"
      ]
    ]
  },
  {
    "id": "ac606f9689fa350d",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 18",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 440,
    "y": 1060,
    "wires": []
  },
  {
    "id": "9f76a96d9d028e11",
    "type": "buffer-parser",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "data": "payload",
    "dataType": "msg",
    "specification": "spec",
    "specificationType": "ui",
    "items": [
      {
        "type": "ascii",
        "name": "item1",
        "offset": 9,
        "length": 4,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "item2",
        "offset": 3,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      }
    ],
    "swap1": "",
    "swap2": "",
    "swap3": "",
    "swap1Type": "swap",
    "swap2Type": "swap",
    "swap3Type": "swap",
    "msgProperty": "payload",
    "msgPropertyType": "str",
    "resultType": "keyvalue",
    "resultTypeType": "return",
    "multipleResult": false,
    "fanOutMultipleResult": false,
    "setTopic": true,
    "outputs": 1,
    "x": 630,
    "y": 980,
    "wires": [
      [
        "8b675ee8e85b4c50"
      ]
    ]
  },
  {
    "id": "8b675ee8e85b4c50",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "Insery DB",
    "func": "var temperature = \"\";\n\nmsg.payload[0] = Buffer.from(msg.payload['item1'], \"hex\");\n\nvar temp = msg.payload[0].readInt16BE(0);\ntemp = (temp / 10);\n\nvar adr = parseInt(msg.payload['item2']);\n\nmsg.payload = {\n    \"position\": \"냉장실\",\n    \"deviceId\": adr,\n    \"temperature\": temp,\n};\n\n//msg.topic = \"insert into fridge(adr, temp) values ('\" + adr + \"','\" + temp + \"')\";\n\nmsg.topic = \"insert into freezer(adr, temp) values ('\" + adr + \"','\" + temp + \"')\";\n\n\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 120,
    "y": 1060,
    "wires": [
      [
        "1f62410bad886f49",
        "b298907f9ee6dc72"
      ]
    ]
  },
  {
    "id": "18f277fa8c58c976",
    "type": "inject",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "60",
    "crontab": "",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 760,
    "wires": [
      [
        "e7d9b51cd2212881"
      ]
    ]
  },
  {
    "id": "e7d9b51cd2212881",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "냉장실_query",
    "func": "msg.payload = Buffer.from([2, 48, 50, 82, 88, 84, 80, 48, 3, 61]);\n\nnode.send(msg);\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 760,
    "wires": [
      [
        "ce3f0313c471e654"
      ]
    ]
  },
  {
    "id": "ce3f0313c471e654",
    "type": "serial request",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "serial": "8ea4664f289b895d",
    "x": 470,
    "y": 760,
    "wires": [
      [
        "b32856adf1fe274f"
      ]
    ]
  },
  {
    "id": "d55dd6338a9427d6",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 19",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 440,
    "y": 820,
    "wires": []
  },
  {
    "id": "b32856adf1fe274f",
    "type": "buffer-parser",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "data": "payload",
    "dataType": "msg",
    "specification": "spec",
    "specificationType": "ui",
    "items": [
      {
        "type": "ascii",
        "name": "item1",
        "offset": 9,
        "length": 4,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "item2",
        "offset": 3,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      }
    ],
    "swap1": "",
    "swap2": "",
    "swap3": "",
    "swap1Type": "swap",
    "swap2Type": "swap",
    "swap3Type": "swap",
    "msgProperty": "payload",
    "msgPropertyType": "str",
    "resultType": "keyvalue",
    "resultTypeType": "return",
    "multipleResult": false,
    "fanOutMultipleResult": false,
    "setTopic": true,
    "outputs": 1,
    "x": 630,
    "y": 760,
    "wires": [
      [
        "acb2ebe96e2a25d7"
      ]
    ]
  },
  {
    "id": "33ff947567e2d709",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "저온창고 [냉장/냉동]",
    "info": "",
    "x": 130,
    "y": 940,
    "wires": []
  },
  {
    "id": "acb2ebe96e2a25d7",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "Insery DB",
    "func": "var temperature = \"\";\n\nmsg.payload[0] = Buffer.from(msg.payload['item1'], \"hex\");\n\nvar temp = msg.payload[0].readInt16BE(0);\ntemp = (temp / 10);\n\nvar adr = parseInt(msg.payload['item2']);\n\nmsg.payload = {\n    \"position\": \"냉장실\",\n    \"deviceId\": adr,\n    \"temperature\": temp,\n};\n\nmsg.topic = \"insert into fridge(adr, temp) values ('\" + adr + \"','\" + temp + \"')\";\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 120,
    "y": 820,
    "wires": [
      [
        "860c65883faa370c",
        "4e07ecc55b9804d4"
      ]
    ]
  },
  {
    "id": "1f62410bad886f49",
    "type": "mysql",
    "z": "ecc1ed326b3511ce",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 280,
    "y": 1060,
    "wires": [
      [
        "ac606f9689fa350d"
      ]
    ]
  },
  {
    "id": "860c65883faa370c",
    "type": "mysql",
    "z": "ecc1ed326b3511ce",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 280,
    "y": 820,
    "wires": [
      [
        "d55dd6338a9427d6"
      ]
    ]
  },
  {
    "id": "b298907f9ee6dc72",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 21",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 280,
    "y": 1100,
    "wires": []
  },
  {
    "id": "4e07ecc55b9804d4",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 22",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 280,
    "y": 860,
    "wires": []
  },
  {
    "id": "b93cb5dd509fd6ed",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "냉장실 테이블",
    "func": "// 현재 날짜에서 30일 초과한 데이터 삭제\nmsg.topic = \"DELETE FROM fz_shm.fridge WHERE date <= DATE_SUB(NOW(), INTERVAL 30 DAY);\"\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 320,
    "y": 1260,
    "wires": [
      [
        "54bc5c70f37435a1"
      ]
    ]
  },
  {
    "id": "54bc5c70f37435a1",
    "type": "mysql",
    "z": "ecc1ed326b3511ce",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 500,
    "y": 1260,
    "wires": [
      [
        "07e92c3612486a35"
      ]
    ]
  },
  {
    "id": "07e92c3612486a35",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 23",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 660,
    "y": 1260,
    "wires": []
  },
  {
    "id": "c1485ae3444d8456",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "냉동실 테이블",
    "func": "// 현재 날짜에서 30일 초과한 데이터 삭제\nmsg.topic = \"DELETE FROM fz_shm.freezer WHERE date <= DATE_SUB(NOW(), INTERVAL 30 DAY);\"\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 320,
    "y": 1320,
    "wires": [
      [
        "90527b857f43d394"
      ]
    ]
  },
  {
    "id": "90527b857f43d394",
    "type": "mysql",
    "z": "ecc1ed326b3511ce",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 500,
    "y": 1320,
    "wires": [
      [
        "95070a3805531c56"
      ]
    ]
  },
  {
    "id": "95070a3805531c56",
    "type": "debug",
    "z": "ecc1ed326b3511ce",
    "name": "debug 24",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 660,
    "y": 1320,
    "wires": []
  },
  {
    "id": "738e160b8eeff9b3",
    "type": "inject",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "01 00 * * *",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 1260,
    "wires": [
      [
        "b93cb5dd509fd6ed"
      ]
    ]
  },
  {
    "id": "f809463db838ad5a",
    "type": "inject",
    "z": "ecc1ed326b3511ce",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "01 00 * * *",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 1320,
    "wires": [
      [
        "c1485ae3444d8456"
      ]
    ]
  },
  {
    "id": "ca7d6ced8ea42118",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "parsing",
    "func": "const deviceId = 1;\nconst value = (msg.payload == null || msg.payload == undefined) ? \"\" : msg.payload[0];\n\nmsg.payload = [deviceId, value];\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 620,
    "y": 120,
    "wires": [
      [
        "9b45aaaddf402545"
      ]
    ]
  },
  {
    "id": "421489e22dc5b3eb",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "parsing",
    "func": "const deviceId = 2;\nconst value = (msg.payload == null || msg.payload == undefined) ? \"\" : msg.payload[0];\n\nmsg.payload = [deviceId, value];\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 620,
    "y": 220,
    "wires": [
      [
        "9b45aaaddf402545"
      ]
    ]
  },
  {
    "id": "64fcb06836a1edc3",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "parsing",
    "func": "const deviceId = 3;\nconst value = (msg.payload == null || msg.payload == undefined) ? \"\" : msg.payload[0];\n\nmsg.payload = [deviceId, value];\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 620,
    "y": 340,
    "wires": [
      [
        "9b45aaaddf402545"
      ]
    ]
  },
  {
    "id": "1ce5841426f0055b",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "parsing",
    "func": "const deviceId = 4;\nconst value = (msg.payload == null || msg.payload == undefined) ? \"\" : msg.payload[0];\n\nmsg.payload = [deviceId, value];\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 620,
    "y": 460,
    "wires": [
      [
        "9b45aaaddf402545"
      ]
    ]
  },
  {
    "id": "d33154de7e6e1b56",
    "type": "function",
    "z": "ecc1ed326b3511ce",
    "name": "parsing",
    "func": "const deviceId = 5;\nconst value = (msg.payload == null || msg.payload == undefined) ? \"\" : msg.payload[0];\n\nmsg.payload = [deviceId, value];\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 480,
    "y": 580,
    "wires": [
      [
        "9b45aaaddf402545"
      ]
    ]
  },
  {
    "id": "bde5c2a89b6150f1",
    "type": "comment",
    "z": "ecc1ed326b3511ce",
    "name": "※수정 사항(24.03.11)",
    "info": "수정 날짜 : 24년 3월 11일\n\n수정 내용 : 현장에서 온도 컨트롤러는 그대로 두고,\n냉장창고, 냉동창고 환경을 바꿔서\n노드레드에서 냉장, 냉동 요청 쿼리 국번 변경했음\n기존 냉장 컨트롤러 역할이 냉동 저장고로 변경,\n냉동 컨트롤러 역할이 냉장 저��고 온도 수집\n\n[ 기존 ]\n냉장 국번 : 1 (49)\n냉동 국번 : 2 (50)\n\n[ 변경 후 ]\n냉장 국번 : 2 (50)\n냉동 국번 : 1 (49)",
    "x": 340,
    "y": 940,
    "wires": []
  },
  {
    "id": "99bf81d7dbd7393c",
    "type": "inject",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "1",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 100,
    "wires": [
      [
        "bd9087e68beb712d"
      ]
    ]
  },
  {
    "id": "bd9087e68beb712d",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "1",
    "dataType": "HoldingRegister",
    "adr": "0",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 320,
    "y": 100,
    "wires": [
      [],
      []
    ]
  },
  {
    "id": "4ccf0cf31a2c0f9e",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "2",
    "dataType": "HoldingRegister",
    "adr": "0",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 320,
    "y": 180,
    "wires": [
      [],
      []
    ]
  },
  {
    "id": "43b210fb872c63a0",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "3",
    "dataType": "HoldingRegister",
    "adr": "0",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 320,
    "y": 240,
    "wires": [
      [
        "81fc19b249ebf3af"
      ],
      []
    ]
  },
  {
    "id": "1eca8167206e9298",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "4",
    "dataType": "InputRegister",
    "adr": "100",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 300,
    "y": 320,
    "wires": [
      [
        "92ebcf95f010ee9c"
      ],
      []
    ]
  },
  {
    "id": "e6c864dea5ed8687",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "5",
    "dataType": "InputRegister",
    "adr": "100",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 320,
    "y": 400,
    "wires": [
      [
        "81de5a4221b76b33"
      ],
      []
    ]
  },
  {
    "id": "81de5a4221b76b33",
    "type": "function",
    "z": "37434fc821a5ec73",
    "name": "parseData",
    "func": "var unitid = msg.unitId;  // 장치 국번\nvar temp = parseFloat(msg.payload) / 10;  // 온도\n\nmsg.payload = {\n    \"unitId\": unitid,\n    \"temp\": temp\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 610,
    "y": 400,
    "wires": [
      [
        "c3d85e4139badf19"
      ]
    ]
  },
  {
    "id": "81a19c56c3eec9ba",
    "type": "mysql",
    "z": "37434fc821a5ec73",
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 480,
    "y": 500,
    "wires": [
      []
    ]
  },
  {
    "id": "f8345cbf259266aa",
    "type": "debug",
    "z": "37434fc821a5ec73",
    "name": "debug 10",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 480,
    "y": 560,
    "wires": []
  },
  {
    "id": "c3d85e4139badf19",
    "type": "join",
    "z": "37434fc821a5ec73",
    "name": "",
    "mode": "custom",
    "build": "array",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "3",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 770,
    "y": 400,
    "wires": [
      [
        "411f09453004f33c"
      ]
    ],
    "info": "'메시지 송신 : 지정수의 메세지파트를 수신 후'\r\n숫자 입력할 때 입력 받는 개수 정확하게 입력해야 출력됨.\r\n\r\n입력 노드 5개면 5으로 작성해줘야한다."
  },
  {
    "id": "411f09453004f33c",
    "type": "function",
    "z": "37434fc821a5ec73",
    "name": "Insert DB",
    "func": "// 가열기 5개 모두 작동할 때 사용 가능\n/*\nvar temp1 = msg.payload[0];\nvar temp2 = msg.payload[1];\nvar temp3 = msg.payload[2];\nvar temp4 = msg.payload[3];\nvar temp5 = msg.payload[4];\n\n\nmsg.payload = {\n    \"가열기1\": temp1,\n    \"가열기2\": temp2,\n    \"가열기3\": temp3,\n    \"가열기4\": temp4,\n    \"가열기5\": temp5\n};\n\nmsg.topic = msg.topic = \"insert into fryer(temp1, temp2, temp3, temp4, temp5) values (\"+temp1+\",\"+temp2+\",\"+temp3+\",\"+temp4+\",\"+temp5+\");\";\n*/\n\n// 테스트 가열기 3번, 4번, 5번\nvar temp3 = msg.payload[0].temp;\nvar temp4 = msg.payload[1].temp;\nvar temp5 = msg.payload[2].temp;\n\nmsg.payload = {\n    \"가열기3\": temp3,\n    \"가열기4\": temp4,\n    \"가열기5\": temp5\n};\n\nmsg.topic = msg.topic = \"insert into fryer(temp3, temp4, temp5) values (\" + temp3 + \",\" + temp4 + \",\" + temp5 + \");\";\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 500,
    "wires": [
      [
        "81a19c56c3eec9ba",
        "f8345cbf259266aa"
      ]
    ]
  },
  {
    "id": "e0d5025860dddaec",
    "type": "inject",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "3",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 180,
    "wires": [
      [
        "4ccf0cf31a2c0f9e"
      ]
    ]
  },
  {
    "id": "0fc66153c103bcb8",
    "type": "inject",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "5",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 240,
    "wires": [
      []
    ]
  },
  {
    "id": "22039994191ff295",
    "type": "inject",
    "z": "37434fc821a5ec73",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "5",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 280,
    "wires": [
      [
        "43b210fb872c63a0"
      ]
    ]
  },
  {
    "id": "92ebcf95f010ee9c",
    "type": "delay",
    "z": "37434fc821a5ec73",
    "name": "",
    "pauseType": "delay",
    "timeout": "500",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 490,
    "y": 320,
    "wires": [
      [
        "e6c864dea5ed8687"
      ]
    ]
  },
  {
    "id": "81fc19b249ebf3af",
    "type": "delay",
    "z": "37434fc821a5ec73",
    "name": "",
    "pauseType": "delay",
    "timeout": "500",
    "timeoutUnits": "milliseconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 510,
    "y": 240,
    "wires": [
      [
        "1eca8167206e9298"
      ]
    ]
  },
  {
    "id": "b316f7858bea040f",
    "type": "inject",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "15",
    "crontab": "",
    "once": true,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 110,
    "y": 760,
    "wires": [
      [
        "df2e754191172370"
      ]
    ]
  },
  {
    "id": "df2e754191172370",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "온도장치_1",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "1",
    "dataType": "InputRegister",
    "adr": "1000",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 270,
    "y": 760,
    "wires": [
      [
        "dcd667a22002db2d"
      ],
      []
    ]
  },
  {
    "id": "eaa36f55a1f5d0f3",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "온도장치_2",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "2",
    "dataType": "InputRegister",
    "adr": "1000",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 270,
    "y": 860,
    "wires": [
      [
        "274b79dcf07921ad"
      ],
      []
    ]
  },
  {
    "id": "eb9f31e50c68f88c",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "온도장치_3",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "3",
    "dataType": "InputRegister",
    "adr": "1000",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 270,
    "y": 980,
    "wires": [
      [
        "e998b5aba8bba173"
      ],
      []
    ]
  },
  {
    "id": "d6daea962ef43254",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "온도장치_4",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "4",
    "dataType": "InputRegister",
    "adr": "100",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 270,
    "y": 1100,
    "wires": [
      [
        "7bb2d06be8224bc5"
      ],
      []
    ]
  },
  {
    "id": "452b3cf3b204aef4",
    "type": "modbus-getter",
    "z": "37434fc821a5ec73",
    "d": true,
    "name": "온도장치_5",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "5",
    "dataType": "InputRegister",
    "adr": "100",
    "quantity": "1",
    "server": "2256a29e05027173",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": true,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 270,
    "y": 1220,
    "wires": [
      [
        "d1a9c1040371e920"
      ],
      []
    ]
  },
  {
    "id": "a7918b82ebc0df92",
    "type": "comment",
    "z": "37434fc821a5ec73",
    "name": "강정유탕기 , 1차 온도(오토닉스 tk4s), 국번1",
    "info": "",
    "x": 190,
    "y": 720,
    "wires": []
  },
  {
    "id": "80605e2b565a965d",
    "type": "comment",
    "z": "37434fc821a5ec73",
    "name": "강정유탕기 , 2차 온도(오토닉스 tk4s), 국번2",
    "info": "",
    "x": 190,
    "y": 820,
    "wires": []
  },
  {
    "id": "4a1b7f8083a30078",
    "type": "comment",
    "z": "37434fc821a5ec73",
    "name": "기존+컨베이어 유탕기, 2차 온도(오토닉스 tk4s),  국번3",
    "info": "",
    "x": 220,
    "y": 920,
    "wires": []
  },
  {
    "id": "96c7038701dd39b5",
    "type": "comment",
    "z": "37434fc821a5ec73",
    "name": "사각유탕기, 기존+컨베이어 유탕기 1차 온도(코노텍 TPI),  국번5",
    "info": "",
    "x": 250,
    "y": 1160,
    "wires": []
  },
  {
    "id": "e652d874b70f9455",
    "type": "comment",
    "z": "37434fc821a5ec73",
    "name": "사각유탕기, 2차 온도(코노텍 TPI),  국번4",
    "info": "",
    "x": 180,
    "y": 1040,
    "wires": []
  },
  {
    "id": "d1a9c1040371e920",
    "type": "function",
    "z": "37434fc821a5ec73",
    "name": "parseData",
    "func": "let temp = msg.payload;\n\nif (isNaN(temp)) {\n    temp = null;\n    \n} else {\n    msg.payload = temp;\n}\n\nmsg.payload = temp;\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 690,
    "y": 940,
    "wires": [
      [
        "bc6107aea002c04c"
      ]
    ]
  },
  {
    "id": "f95dce7df15615b2",
    "type": "mysql",
    "z": "37434fc821a5ec73",
    "d": true,
    "mydb": "dd435157a6d5c335",
    "name": "",
    "x": 920,
    "y": 1180,
    "wires": [
      [
        "27f588b3dfe6d18e"
      ]
    ]
  },
  {
    "id": "07513c5873517b03",
    "type": "debug",
    "z": "37434fc821a5ec73",
    "name": "debug 34",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 920,
    "y": 1100,
    "wires": []
  },
  {
    "id": "7bb2d06be8224bc5",
    "type": "delay",
    "z": "37434fc821a5ec73",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 440,
    "y": 1100,
    "wires": [
      [
        "d1a9c1040371e920",
        "452b3cf3b204aef4"
      ]
    ]
  },
  {
    "id": "bc6107aea002c04c",
    "type": "join",
    "z": "37434fc821a5ec73",
    "name": "",
    "mode": "custom",
    "build": "array",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "5",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 710,
    "y": 1040,
    "wires": [
      [
        "b23ee020e2b6eecb"
      ]
    ],
    "info": "'메시지 송신 : 지정수의 메세지파트를 수신 후'\r\n숫자 입력할 때 입력 받는 개수 정확하게 입력해야 출력됨.\r\n\r\n입력 노드 5개면 5으로 작성해줘야한다."
  },
  {
    "id": "b23ee020e2b6eecb",
    "type": "function",
    "z": "37434fc821a5ec73",
    "name": "Insert DB",
    "func": "var temp1 = msg.payload[0][0];\nvar temp2 = msg.payload[1][0];\nvar temp3 = msg.payload[2][0];\nvar temp4 = msg.payload[3][0];\nvar temp5 = msg.payload[4][0];\n\nfunction parsing(temp) {\n    if (temp == undefined) {\n        return \"\";\n    } else {\n        if (temp > 32767) {  // temp값이 32,767보다 클 경우\n            temp -= 65535;  // 65,535를 빼주어 영하 온도값을 표시한다.\n        }\n        return temp;\n    }\n}\n\ntemp1 = parsing(temp1);\ntemp2 = parsing(temp2);\ntemp3 = parsing(temp3);\ntemp4 = parsing(temp4) / 10;\ntemp5 = parsing(temp5) / 10;\n\nmsg.payload = {\n    \"온도장치_1\": temp1,\n    \"온도장치_2\": temp2,\n    \"온도장치_3\": temp3,\n    \"온도장치_4\": temp4,\n    \"온도장치_5\": temp5\n};\n\nmsg.topic = \"insert into fryer(temp1, temp2, temp3, temp4, temp5) values ('\"+temp1+\"','\"+temp2+\"','\"+temp3+\"','\"+temp4+\"','\"+temp5+\"')\";\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 760,
    "y": 1140,
    "wires": [
      [
        "f95dce7df15615b2",
        "07513c5873517b03"
      ]
    ]
  },
  {
    "id": "dcd667a22002db2d",
    "type": "delay",
    "z": "37434fc821a5ec73",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 440,
    "y": 760,
    "wires": [
      [
        "eaa36f55a1f5d0f3",
        "d1a9c1040371e920"
      ]
    ]
  },
  {
    "id": "274b79dcf07921ad",
    "type": "delay",
    "z": "37434fc821a5ec73",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 440,
    "y": 860,
    "wires": [
      [
        "eb9f31e50c68f88c",
        "d1a9c1040371e920"
      ]
    ]
  },
  {
    "id": "e998b5aba8bba173",
    "type": "delay",
    "z": "37434fc821a5ec73",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 440,
    "y": 980,
    "wires": [
      [
        "d1a9c1040371e920",
        "d6daea962ef43254"
      ]
    ]
  },
  {
    "id": "f1fa63e437c8376c",
    "type": "comment",
    "z": "37434fc821a5ec73",
    "name": "※ Data Insert",
    "info": "1. 사각유탕기 : 국번 5번(1차), 4번(2차)\n\n2. 강정유탕기 : 국번 1번(1차), 2번(2차)\n\n3. 기존+컨베이어 유탕기 : 국번 5번(1차), 3번(2차)",
    "x": 90,
    "y": 680,
    "wires": []
  },
  {
    "id": "54aa9aa3924b97e9",
    "type": "delay",
    "z": "37434fc821a5ec73",
    "name": "",
    "pauseType": "delay",
    "timeout": "9",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "allowrate": false,
    "outputs": 1,
    "x": 480,
    "y": 940,
    "wires": [
      []
    ]
  },
  {
    "id": "27f588b3dfe6d18e",
    "type": "debug",
    "z": "37434fc821a5ec73",
    "name": "debug 35",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 1080,
    "y": 1180,
    "wires": []
  },
  {
    "id": "8e0f8bf5d74b4f67",
    "type": "comment",
    "z": "edfcbce253259273",
    "name": "금속검출기 after",
    "info": "",
    "x": 160,
    "y": 100,
    "wires": []
  },
  {
    "id": "4c7ba7c6dfa12321",
    "type": "mysql",
    "z": "edfcbce253259273",
    "mydb": "ad6058ecb240f607",
    "name": "MySQL",
    "x": 560,
    "y": 260,
    "wires": [
      [
        "31a58766fb5ec657"
      ]
    ]
  },
  {
    "id": "4e64d1f32f7a208d",
    "type": "function",
    "z": "edfcbce253259273",
    "name": "문자열 파싱",
    "func": "var data = msg.payload;\nvar dataArray = data.split('');\n\n// CR(-1), LF(-2)\nvar len = dataArray.length;\nvar detect = false;\n\n// 첫 번째 버퍼가 '공백', 마지막 직전 문자가 '\\r', 마지막 문자가 '\\n' 일 때 정상 데이터\nif (dataArray[0] === \" \" && dataArray[len - 2] === '\\r' && dataArray[len - 1] === '\\n') {\n    detect = true;\n} else {\n    return;\n}\n\n// 검출코드\nremoveFrontGap(dataArray);\nvar detectCode = returnDataToSearchChar(dataArray, ' ');\n\n/* 필요 없는 데이터를 건너뛰기 */\nremoveFrontGap(dataArray);\nreturnDataToSearchChar(dataArray, ' ');\n\n// 검출 시간\nremoveFrontGap(dataArray);\nvar localTime = returnDataToSearchChar(dataArray, ' ');\n\n// NG 개수\nremoveFrontGap(dataArray);\nvar ngCount = returnDataToSearchChar(dataArray, ' ');\n\n\n// 총 생산 개수\nremoveFrontGap(dataArray);\nvar total = returnDataToSearchChar(dataArray, '\\r');\n\nmsg.payload = {\n    'detectCode' : detectCode,\n    'localTime' : localTime,\n    'ngCount' : ngCount,\n    'total' : total\n};\n\n// mysql query\nvar db = 'fz_shm';\nvar table = 'detector';\n\nvar query = \" insert into \" + db + \".\" + table + \"(detectCode, ngCount, total) \";\nquery += \"values('\" + detectCode + \"', '\" + ngCount + \"', '\" + total + \"')\";\n\nmsg.topic = query;\nreturn msg;\n\n/* 배열에서 앞 부분의 공백을 제거하는 함수 */\nfunction removeFrontGap(buffs) {\n    var lastGapIndex = -1;\n    for (let i = 0; i < buffs.length; i++) {\n        if (buffs[i] == ' ') {\n            lastGapIndex++;\n            continue;\n        } else {\n            break;\n        }\n    }\n    console.log(lastGapIndex);\n    if (lastGapIndex != -1) {\n        buffs = buffs.splice(0, lastGapIndex + 1);\n    }\n}\n\n/* 버퍼의 앞 부분부터 검색할 문자의 인덱스 위치까지를 반환하는 함수 */\nfunction returnDataToSearchChar(buffs, ch) {\n    var searchIndex = buffs.indexOf(ch);\n    var returnData = \"\";\n\n    if (searchIndex == -1) {\n        return;\n    }\n\n    returnData = (buffs.slice(0, searchIndex)).join('');\n    buffs = buffs.splice(0, searchIndex); // 실제 배열을 수정함.\n\n    return returnData;\n}\n\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 350,
    "y": 220,
    "wires": [
      [
        "3e75a50f5470877b",
        "4c7ba7c6dfa12321"
      ]
    ]
  },
  {
    "id": "109dbf3c798d64b0",
    "type": "converter",
    "z": "edfcbce253259273",
    "name": "ASCII",
    "from": "ascii",
    "x": 570,
    "y": 160,
    "wires": [
      [
        "4e64d1f32f7a208d"
      ]
    ]
  },
  {
    "id": "3e75a50f5470877b",
    "type": "debug",
    "z": "edfcbce253259273",
    "name": "출력",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 550,
    "y": 220,
    "wires": []
  },
  {
    "id": "a25e684fbeaf61a2",
    "type": "function",
    "z": "edfcbce253259273",
    "name": "버퍼 데이터 전환",
    "func": "/**\n * 데이터의 앞 부분에 오는 두 개의 문자(ASCII)를 더 했을 때 \n * 정상 데이터 80, 81 여부 확인 (머신 설정에 나와있음)\n * \n * \n * 코드 정의\n * 80: 금속검출\n * 81: 결품검출\n * 82: 전원ON\n * 83: 전원OFF\n * \n * 해당 코드에 맞는 분기 작성하기.\n * \n * \n * NMD530 금속검출기 모델은 ASCII 인코딩을 사용함\n */\n\n/**\n * 데이터 검증 흐름\n * \n * 1~2 코드가 82, 83일 경우 해당 로그를 노드레드에 출력하고 종료\n * \n * 80, 81일 경우 해당 데이터를 파싱\n * \n * 버퍼에서 CR, LF을 제거\n * \n * 23길이(NG 횟수의 마지막)이후 데이터를 모두 TOTAL 값으로 파싱\n */\n\n\n\n// 금속검출\n// 0x20, 0x38, 0x30, 0x20, 0x20, 0x20, 0x20, 0x32, 0x20, 0x31, 0x37, 0x3A, 0x35, 0x30, 0x3A, 0x32, 0x30, 0x20, 0x20, 0x20, 0x20, 0x20, 0x32, 0x34, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x30, 0x0D, 0x0A\n// var detectionData = [0x20, 0x38, 0x30, 0x20, 0x20, 0x20, 0x20, 0x32, 0x20, 0x31, 0x37, 0x3A, 0x35, 0x30, 0x3A, 0x32, 0x30, 0x20, 0x20, 0x20, 0x20, 0x20, 0x32, 0x34, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x30, 0x0D, 0x0A];\n\n// 전원 OFF\n// 0x20, 0x38, 0x33, 0x20, 0x20, 0x20, 0x20, 0x32, 0x20, 0x31, 0x37, 0x3A, 0x35, 0x31, 0x3A, 0x35, 0x33, 0x20, 0x20, 0x20, 0x20, 0x20, 0x32, 0x34, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x30, 0x0D, 0x0A\n// var detectionData = [0x20, 0x38, 0x33, 0x20, 0x20, 0x20, 0x20, 0x32, 0x20, 0x31, 0x37, 0x3A, 0x35, 0x31, 0x3A, 0x35, 0x33, 0x20, 0x20, 0x20, 0x20, 0x20, 0x32, 0x34, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x30, 0x0D, 0x0A];\n\n\n\nmsg.payload = Buffer.from(msg.payload);\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 370,
    "y": 160,
    "wires": [
      [
        "109dbf3c798d64b0"
      ]
    ]
  },
  {
    "id": "859177b1ef5a7f05",
    "type": "tcp in",
    "z": "edfcbce253259273",
    "name": "",
    "server": "server",
    "host": "",
    "port": "5001",
    "datamode": "stream",
    "datatype": "buffer",
    "newline": "",
    "topic": "",
    "trim": false,
    "base64": false,
    "tls": "",
    "x": 140,
    "y": 160,
    "wires": [
      [
        "a25e684fbeaf61a2",
        "47b87ded7b823596"
      ]
    ]
  },
  {
    "id": "31a58766fb5ec657",
    "type": "debug",
    "z": "edfcbce253259273",
    "name": "DB 저장",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 720,
    "y": 260,
    "wires": []
  },
  {
    "id": "47b87ded7b823596",
    "type": "debug",
    "z": "edfcbce253259273",
    "name": "debug 27",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 700,
    "y": 100,
    "wires": []
  },
  {
    "id": "20abb38cc362e03d",
    "type": "inject",
    "z": "edfcbce253259273",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 160,
    "y": 340,
    "wires": [
      [
        "dd2597792bdea7a3"
      ]
    ]
  },
  {
    "id": "dd2597792bdea7a3",
    "type": "function",
    "z": "edfcbce253259273",
    "name": "모든다해 파싱",
    "func": "var detectionData = [2, 48, 49, 49, 50, 3]; // test\n\nvar ccode = \"0056\"; // 거래처코드\nvar scode = \"91\"; // 장비 코드\nvar dataLen = detectionData.length;\nvar send = false;\n\nconst STX = detectionData[0];\nconst ETX = detectionData[detectionData.length-1];\nvar productNo = parseInt(String.fromCharCode(detectionData[1], detectionData[2]));\nvar detected = parseInt(String.fromCharCode(detectionData[3]));\n\nif (STX == 2 && ETX == 3 && dataLen == 6 && detected == 1) {\n    /* STX가 2, ETX가 3, 데이터길이가 6, 검출신호가 1 */\n    send = true;\n} else {\n    return;\n}\n\n\nif (send) {\n    /* MySQL */\n    var db = 'fz_shm';\n    var table = 'detector';\n\n    var query = \" insert into \" + db + \".\" + table + \"(productNo, detected) \";\n    query += \"values('\" + productNo + \"', '\" + detected + \"')\";\n    msg.topic = query;\n\n\n    /* API Send */\n    msg.headers = {};\n    msg.headers['content-type'] = \"application/json\";\n    msg.headers['Accept'] = \"application/json\";\n\n    msg.payload = {\n        \"ccode\": ccode,\n        \"scode\": scode\n    };\n\n}\n\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 340,
    "y": 340,
    "wires": [
      [
        "a81eb8adc1a6ea8e",
        "499d9000b6650e9c"
      ]
    ]
  },
  {
    "id": "a81eb8adc1a6ea8e",
    "type": "debug",
    "z": "edfcbce253259273",
    "name": "debug 28",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 580,
    "y": 340,
    "wires": []
  },
  {
    "id": "499d9000b6650e9c",
    "type": "mysql",
    "z": "edfcbce253259273",
    "mydb": "ad6058ecb240f607",
    "name": "MySQL",
    "x": 580,
    "y": 380,
    "wires": [
      []
    ]
  },
  {
    "id": "f90b1e10e628b916",
    "type": "inject",
    "z": "edfcbce253259273",
    "name": "일요일 01시",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 01 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 170,
    "y": 440,
    "wires": [
      [
        "7ae61bf397a16270"
      ]
    ]
  },
  {
    "id": "7ae61bf397a16270",
    "type": "function",
    "z": "edfcbce253259273",
    "name": "테이블 내용 삭제",
    "func": "const db = 'fz_shm';\nconst table = 'detector';\nconst query =  `truncate table ${db}.${table};`;\n\nmsg.topic = query;\nmsg.payload = '금속검출기 데이터베이스 내용 삭제';\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 390,
    "y": 440,
    "wires": [
      [
        "252afef5271ee910",
        "5ad6cf6f807c6d02"
      ]
    ]
  },
  {
    "id": "252afef5271ee910",
    "type": "debug",
    "z": "edfcbce253259273",
    "name": "debug 29",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 600,
    "y": 440,
    "wires": []
  },
  {
    "id": "5ad6cf6f807c6d02",
    "type": "mysql",
    "z": "edfcbce253259273",
    "mydb": "ad6058ecb240f607",
    "name": "MySQL",
    "x": 600,
    "y": 480,
    "wires": [
      []
    ]
  }
]