[
  {
    "id": "ea534a0bb0b5928e",
    "type": "tab",
    "label": "Data Insert DB",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "88eb231280c2e9e9",
    "type": "tab",
    "label": "Send API",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "34cbadba494cdf22",
    "type": "tab",
    "label": "DB Data remove",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "07e8b8ad6d28c925",
    "type": "modbus-client",
    "name": "smg-5420_1",
    "clienttype": "tcp",
    "bufferCommands": true,
    "stateLogEnabled": false,
    "queueLogEnabled": false,
    "failureLogEnabled": true,
    "tcpHost": "192.168.222.201",
    "tcpPort": "5001",
    "tcpType": "DEFAULT",
    "serialPort": "COM4",
    "serialType": "RTU-BUFFERD",
    "serialBaudrate": "9600",
    "serialDatabits": "8",
    "serialStopbits": "1",
    "serialParity": "none",
    "serialConnectionDelay": "100",
    "serialAsciiResponseStartDelimiter": "0x3A",
    "unit_id": "1",
    "commandDelay": "1",
    "clientTimeout": "1000",
    "reconnectOnTimeout": false,
    "reconnectTimeout": "2000",
    "parallelUnitIdsAllowed": true,
    "showWarnings": true,
    "showLogs": true
  },
  {
    "id": "8ef41b99e87b0433",
    "type": "modbus-client",
    "name": "smg-5420_4",
    "clienttype": "tcp",
    "bufferCommands": true,
    "stateLogEnabled": false,
    "queueLogEnabled": false,
    "failureLogEnabled": true,
    "tcpHost": "192.168.222.204",
    "tcpPort": "5004",
    "tcpType": "DEFAULT",
    "serialPort": "/dev/ttyUSB0",
    "serialType": "RTU",
    "serialBaudrate": "9600",
    "serialDatabits": "8",
    "serialStopbits": "1",
    "serialParity": "none",
    "serialConnectionDelay": "100",
    "serialAsciiResponseStartDelimiter": "0x3A",
    "unit_id": "4",
    "commandDelay": "100",
    "clientTimeout": "2000",
    "reconnectOnTimeout": false,
    "reconnectTimeout": "2000",
    "parallelUnitIdsAllowed": true
  },
  {
    "id": "78d380a20265ae5e",
    "type": "modbus-client",
    "name": "smg-5420_2",
    "clienttype": "tcp",
    "bufferCommands": true,
    "stateLogEnabled": false,
    "queueLogEnabled": false,
    "failureLogEnabled": true,
    "tcpHost": "192.168.222.202",
    "tcpPort": "5002",
    "tcpType": "DEFAULT",
    "serialPort": "COM10",
    "serialType": "RTU-BUFFERD",
    "serialBaudrate": "9600",
    "serialDatabits": "8",
    "serialStopbits": "1",
    "serialParity": "none",
    "serialConnectionDelay": "100",
    "serialAsciiResponseStartDelimiter": "0x3A",
    "unit_id": "0",
    "commandDelay": "1",
    "clientTimeout": "1000",
    "reconnectOnTimeout": false,
    "reconnectTimeout": "2000",
    "parallelUnitIdsAllowed": true,
    "showWarnings": true,
    "showLogs": true
  },
  {
    "id": "feae362ac7930cae",
    "type": "modbus-client",
    "name": "smg_5420_3",
    "clienttype": "tcp",
    "bufferCommands": true,
    "stateLogEnabled": false,
    "queueLogEnabled": false,
    "failureLogEnabled": true,
    "tcpHost": "192.168.222.203",
    "tcpPort": "5003",
    "tcpType": "DEFAULT",
    "serialPort": "COM10",
    "serialType": "RTU-BUFFERD",
    "serialBaudrate": "9600",
    "serialDatabits": "8",
    "serialStopbits": "1",
    "serialParity": "none",
    "serialConnectionDelay": "100",
    "serialAsciiResponseStartDelimiter": "0x3A",
    "unit_id": "0",
    "commandDelay": "1",
    "clientTimeout": "1000",
    "reconnectOnTimeout": false,
    "reconnectTimeout": "2000",
    "parallelUnitIdsAllowed": true,
    "showWarnings": true,
    "showLogs": true
  },
  {
    "id": "da28b1d93eba7f99",
    "type": "mongodb",
    "hostname": "127.0.0.1",
    "topology": "direct",
    "connectOptions": "",
    "port": "27017",
    "db": "fz_shm",
    "name": ""
  },
  {
    "id": "66eedb276c7fa439",
    "type": "modbus-client",
    "name": "에어클리너 PLC(디씨팩)",
    "clienttype": "tcp",
    "bufferCommands": true,
    "stateLogEnabled": false,
    "queueLogEnabled": false,
    "failureLogEnabled": true,
    "tcpHost": "192.168.222.206",
    "tcpPort": "5006",
    "tcpType": "DEFAULT",
    "serialPort": "/dev/ttyUSB",
    "serialType": "RTU-BUFFERD",
    "serialBaudrate": "9600",
    "serialDatabits": "8",
    "serialStopbits": "1",
    "serialParity": "none",
    "serialConnectionDelay": "100",
    "serialAsciiResponseStartDelimiter": "0x3A",
    "unit_id": "1",
    "commandDelay": "1",
    "clientTimeout": "1000",
    "reconnectOnTimeout": true,
    "reconnectTimeout": "2000",
    "parallelUnitIdsAllowed": true,
    "showWarnings": true,
    "showLogs": true
  },
  {
    "id": "844eeda3a12d891f",
    "type": "modbus-client",
    "name": "에어세척기 _PLC(SK팩)",
    "clienttype": "tcp",
    "bufferCommands": true,
    "stateLogEnabled": false,
    "queueLogEnabled": false,
    "failureLogEnabled": true,
    "tcpHost": "192.168.222.205",
    "tcpPort": "5005",
    "tcpType": "DEFAULT",
    "serialPort": "/dev/ttyUSB",
    "serialType": "RTU-BUFFERD",
    "serialBaudrate": "9600",
    "serialDatabits": "8",
    "serialStopbits": "1",
    "serialParity": "none",
    "serialConnectionDelay": "100",
    "serialAsciiResponseStartDelimiter": "0x3A",
    "unit_id": 2,
    "commandDelay": 1,
    "clientTimeout": 1000,
    "reconnectOnTimeout": true,
    "reconnectTimeout": 2000,
    "parallelUnitIdsAllowed": true,
    "showWarnings": true,
    "showLogs": true
  },
  {
    "id": "70a908f6e7075909",
    "type": "modbus-client",
    "name": "모노블럭 시스템_PLC",
    "clienttype": "tcp",
    "bufferCommands": true,
    "stateLogEnabled": false,
    "queueLogEnabled": false,
    "failureLogEnabled": true,
    "tcpHost": "192.168.222.207",
    "tcpPort": "5007",
    "tcpType": "DEFAULT",
    "serialPort": "/dev/ttyUSB",
    "serialType": "RTU-BUFFERD",
    "serialBaudrate": "9600",
    "serialDatabits": "8",
    "serialStopbits": "1",
    "serialParity": "none",
    "serialConnectionDelay": "100",
    "serialAsciiResponseStartDelimiter": "0x3A",
    "unit_id": "3",
    "commandDelay": "1",
    "clientTimeout": "1000",
    "reconnectOnTimeout": true,
    "reconnectTimeout": "2000",
    "parallelUnitIdsAllowed": true,
    "showWarnings": true,
    "showLogs": true
  },
  {
    "id": "8c3a0a0b2c4c903a",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "10",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 100,
    "wires": [
      [
        "4410c4f6f859597f"
      ]
    ]
  },
  {
    "id": "4410c4f6f859597f",
    "type": "modbus-getter",
    "z": "ea534a0bb0b5928e",
    "name": "smg-5420_1",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "1",
    "dataType": "InputRegister",
    "adr": "0",
    "quantity": "1",
    "server": "07e8b8ad6d28c925",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 100,
    "wires": [
      [
        "8a287edeb8a9cbb0"
      ],
      []
    ]
  },
  {
    "id": "1258f7f276b80bb8",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 101",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 650,
    "y": 60,
    "wires": []
  },
  {
    "id": "883f1373cbc35b7b",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "10",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 280,
    "wires": [
      [
        "1bafa0bd6d1b8b76"
      ]
    ]
  },
  {
    "id": "b895b5c13dda070d",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "10",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 480,
    "wires": [
      [
        "147ca1be8a9ed725"
      ]
    ]
  },
  {
    "id": "167d8937c61825bf",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 120,
    "y": 660,
    "wires": [
      [
        "ac06a5939d2c44b6"
      ]
    ]
  },
  {
    "id": "6a328979ef9afcec",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "1층 팜유저장탱크 온도, 온도센서",
    "info": "*온도제어기\n-제조사 : 코노텍\n-모델명 : TP10",
    "x": 170,
    "y": 620,
    "wires": []
  },
  {
    "id": "ac06a5939d2c44b6",
    "type": "modbus-getter",
    "z": "ea534a0bb0b5928e",
    "name": "smg-5420_4",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "4",
    "dataType": "InputRegister",
    "adr": "100",
    "quantity": "1",
    "server": "8ef41b99e87b0433",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 660,
    "wires": [
      [
        "5cd5f49bd3cdbf60",
        "6d3c85b4d97a0a33"
      ],
      []
    ]
  },
  {
    "id": "5a45b7aa3ebaaa4a",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 102",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 650,
    "y": 240,
    "wires": []
  },
  {
    "id": "51769f5661a2d345",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 103",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 650,
    "y": 440,
    "wires": []
  },
  {
    "id": "3d3e720a28627ba8",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 104",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 670,
    "y": 640,
    "wires": []
  },
  {
    "id": "1bafa0bd6d1b8b76",
    "type": "modbus-getter",
    "z": "ea534a0bb0b5928e",
    "name": "smg-5420_2",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "2",
    "dataType": "InputRegister",
    "adr": "0",
    "quantity": "1",
    "server": "78d380a20265ae5e",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 280,
    "wires": [
      [
        "648b4c34358532ae"
      ],
      []
    ]
  },
  {
    "id": "147ca1be8a9ed725",
    "type": "modbus-getter",
    "z": "ea534a0bb0b5928e",
    "name": "smg-5420_3",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "3",
    "dataType": "InputRegister",
    "adr": "0",
    "quantity": "1",
    "server": "feae362ac7930cae",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 290,
    "y": 480,
    "wires": [
      [
        "16c25fc39e702fc7"
      ],
      []
    ]
  },
  {
    "id": "8a287edeb8a9cbb0",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "let device_id = 1;\nlet pressure = msg.payload[0] / 100;\nlet date = new Date();\nlet dateTime = date.toLocaleString();\n\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"device_name\": \"압력계1\",\n    \"ccode\": \"0039\",\n    \"scode\": \"79\",\n    \"pressure\": pressure,\n    \"date\": dateTime,  // 사용자가 보기 편한 날짜/시간\n    \"check_date\": date  // 시간 조건 조회를 위한 키\n}\n\n\nreturn msg;",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 460,
    "y": 100,
    "wires": [
      [
        "1258f7f276b80bb8",
        "15256f6ef2e74007",
        "b91a0cbef2fcc1e8"
      ]
    ]
  },
  {
    "id": "648b4c34358532ae",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "let device_id = 2;\nlet pressure = msg.payload[0] / 100;\nlet date = new Date();\nlet dateTime = date.toLocaleString();\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"device_name\": \"압력계2\",\n    \"ccode\": \"0039\",\n    \"scode\": \"80\",\n    \"pressure\": pressure,\n    \"date\": dateTime,  // 사용자가 보기 편한 날짜/시간\n    \"check_date\": date  // 시간 조건 조회를 위한 키\n}\n\n\nreturn msg;",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 460,
    "y": 280,
    "wires": [
      [
        "5a45b7aa3ebaaa4a",
        "50d37271fd9016d8",
        "920e02f39e3339c7"
      ]
    ]
  },
  {
    "id": "16c25fc39e702fc7",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "let device_id = 3;\nlet pressure = msg.payload[0] / 100;\nlet date = new Date();\nlet dateTime = date.toLocaleString();\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"device_name\": \"압력계3\",\n    \"ccode\": \"0039\",\n    \"scode\": \"81\",\n    \"pressure\": pressure,\n    \"date\": dateTime,  // 사용자가 보기 편한 날짜/시간\n    \"check_date\": date  // 시간 조건 조회를 위한 키\n}\n\n\nreturn msg;",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 460,
    "y": 480,
    "wires": [
      [
        "51769f5661a2d345",
        "488ae34828cc17bc",
        "c885625cd169de11"
      ]
    ]
  },
  {
    "id": "5cd5f49bd3cdbf60",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "let device_id = 4;\nlet temp = \"\";\nlet date = new Date();\nlet dateTime = date.toLocaleString();\n\nif (msg.payload == \"error\") {\n    temp = \"\";\n} else {\n    temp = parseFloat(msg.payload[0]) / 10;\n}\n\nmsg.payload = {\n    \"device_name\": \"TP10\",\n    \"device_id\": device_id,\n    \"temp\": temp,\n    \"date\": dateTime,  // 사용자가 보기 편한 날짜/시간\n    \"check_date\": date  // 시간 조건 조회를 위한 키\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 460,
    "y": 660,
    "wires": [
      [
        "3d3e720a28627ba8",
        "fe9b98bb790278c3"
      ]
    ]
  },
  {
    "id": "15256f6ef2e74007",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "filter_pressure1",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 720,
    "y": 100,
    "wires": []
  },
  {
    "id": "50d37271fd9016d8",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "filter_pressure2",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 720,
    "y": 280,
    "wires": []
  },
  {
    "id": "488ae34828cc17bc",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "filter_pressure3",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 720,
    "y": 480,
    "wires": []
  },
  {
    "id": "fe9b98bb790278c3",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "oilTank_temp",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 860,
    "y": 680,
    "wires": []
  },
  {
    "id": "112a618bbe39ff09",
    "type": "catch",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "scope": [
      "ac06a5939d2c44b6"
    ],
    "uncaught": false,
    "x": 110,
    "y": 740,
    "wires": [
      [
        "73f43b6060acf441"
      ]
    ]
  },
  {
    "id": "73f43b6060acf441",
    "type": "change",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "rules": [
      {
        "t": "set",
        "p": "payload",
        "pt": "msg",
        "to": "error",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 260,
    "y": 740,
    "wires": [
      [
        "5cd5f49bd3cdbf60"
      ]
    ]
  },
  {
    "id": "2297bdf14bb43790",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "2층_작업장, PLC1_에어세척기(SK팩) pet ",
    "info": "*수집 장비 : 에어세척기\n*수집 항목 : 에어압력, 작동 시간\n*수집 주기 : 발생 시",
    "x": 200,
    "y": 860,
    "wires": []
  },
  {
    "id": "a59743946e966b09",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "2층_작업장, PLC2_에어클리너(디씨팩) 캔 에어압",
    "info": "*수집 장비 : 에어클리너\n*수집 항목 : 에어압력, 작동시간\n*수집 주기 : 발생 시\n\n - 비트 읽기 영역 : D02002.0  (가동시간 계산용)\n하루마다 1이 처음 들어올때 시간 체크와 0으로 바뀌었을때 시간 체크해서\n하루 총 가동시간 계산하기\n - 작동중 데이터(비트) 출력되는 값 : 1\n - 작동 중지 데이터(비트) 출력되는 값 : 0",
    "x": 200,
    "y": 1000,
    "wires": []
  },
  {
    "id": "80e1988f66539f11",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "2층_작업장, PLC3_모노블럭시스템",
    "info": "*수집 장비 : 모노블럭시스템\n*수집 항목 : 충진 및 원터치캡핑 \n        생산수량(워드), 가동 상태(비트)\n*수집 주기 : 발생 시\n\n\n - 비트 읽기 ���역 : D02002.0  (가동시간 계산용)\n하루마다 1이 처음 들어올때 시간 체크와 0으로 바뀌었을때 시간 체크해서\n하루 총 가동시간 계산하기\n - 작동중 데이터(비트) 출력되는 값 : 1\n - 작동 중지 데이터(비트) 출력되는 값 : 0",
    "x": 180,
    "y": 1200,
    "wires": []
  },
  {
    "id": "f7989dc694da61bc",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "1",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 900,
    "wires": [
      [
        "08f4d3cecf600ee1"
      ]
    ]
  },
  {
    "id": "412fc6ac5eefbbdc",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "1",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 1080,
    "wires": [
      [
        "98ca6ed80dbb2fc6"
      ]
    ]
  },
  {
    "id": "f2ea3e59bff573e9",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "1",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 1240,
    "wires": [
      [
        "3ecec96b54e0e69e"
      ]
    ]
  },
  {
    "id": "08f4d3cecf600ee1",
    "type": "modbus-getter",
    "z": "ea534a0bb0b5928e",
    "name": "smg-5400",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "2",
    "dataType": "InputRegister",
    "adr": "0",
    "quantity": "5",
    "server": "844eeda3a12d891f",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 280,
    "y": 900,
    "wires": [
      [
        "fa0d9b9c212c6ecc",
        "9b9f385b35d6e065"
      ],
      []
    ]
  },
  {
    "id": "98ca6ed80dbb2fc6",
    "type": "modbus-getter",
    "z": "ea534a0bb0b5928e",
    "name": "smg-5400",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "1",
    "dataType": "InputRegister",
    "adr": "0",
    "quantity": "5",
    "server": "66eedb276c7fa439",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 280,
    "y": 1080,
    "wires": [
      [
        "8e151000ede4cf6f",
        "7bdf110d9ff41ccc"
      ],
      []
    ]
  },
  {
    "id": "417059960c441b37",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 111",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 610,
    "y": 860,
    "wires": []
  },
  {
    "id": "49e8edfc926697e4",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "air_washer",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 670,
    "y": 900,
    "wires": []
  },
  {
    "id": "cfa3c92809c069bb",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 112",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 610,
    "y": 1040,
    "wires": []
  },
  {
    "id": "316120ec6a8821de",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "air_cleaner",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 670,
    "y": 1080,
    "wires": []
  },
  {
    "id": "4a1573ab1532a224",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 113",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 610,
    "y": 1220,
    "wires": []
  },
  {
    "id": "a358cd79b02f0d20",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "mono_block",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 670,
    "y": 1260,
    "wires": []
  },
  {
    "id": "3321e827fbfe351a",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "2층_작업장, PLC3_비전카메라",
    "info": "*수집 장비 : 비전카메라\n*수집 항목 : 비전카메라 이미지\n*수집 주기 : 발생 시",
    "x": 170,
    "y": 1360,
    "wires": []
  },
  {
    "id": "68d63211b7d4b450",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "vision_camera",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 700,
    "y": 1480,
    "wires": []
  },
  {
    "id": "bfc6e4ebb711d503",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "2층_작업장, 중량선별기",
    "info": "*수집 장비 : 중량선별기\n*수집 항목 : 생산품 중량\n*수집 주기 : 발생 시\n\n*중량선별기 제조사 : 화인매카트로닉스(FINE)\n*중량선별기 모델명 : FAC-5900",
    "x": 140,
    "y": 1660,
    "wires": []
  },
  {
    "id": "52f69a337c09f4a5",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "var status = msg.payload[2];\nvar product_code = msg.payload[1];\nvar product_weight = msg.payload[3];\nvar count = msg.payload[4];\nvar over = msg.payload[5];\nvar fall = msg.payload[6];\nvar metal = msg.payload[7];\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0039\",\n    \"status\": status,\n    \"product_code\": product_code,\n    \"product_weight\": product_weight,\n    \"count\": count,\n    \"over\": over,\n    \"fall\": fall,\n    \"metal\": metal\n};\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 320,
    "y": 1820,
    "wires": [
      []
    ]
  },
  {
    "id": "3427b1e3fafb80cf",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 116",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 610,
    "y": 1660,
    "wires": []
  },
  {
    "id": "f02db0ada20309d5",
    "type": "mongodb out",
    "z": "ea534a0bb0b5928e",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "weight_checker",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "store",
    "x": 680,
    "y": 1700,
    "wires": []
  },
  {
    "id": "3ecec96b54e0e69e",
    "type": "modbus-getter",
    "z": "ea534a0bb0b5928e",
    "name": "smg-5400",
    "showStatusActivities": true,
    "showErrors": true,
    "showWarnings": true,
    "logIOActivities": false,
    "unitid": "3",
    "dataType": "InputRegister",
    "adr": "0",
    "quantity": "5",
    "server": "70a908f6e7075909",
    "useIOFile": false,
    "ioFile": "",
    "useIOForPayload": false,
    "emptyMsgOnFail": false,
    "keepMsgProperties": false,
    "delayOnStart": false,
    "startDelayTime": "",
    "x": 280,
    "y": 1240,
    "wires": [
      [
        "950ad5742575087c"
      ],
      []
    ]
  },
  {
    "id": "b91a0cbef2fcc1e8",
    "type": "http request",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0039/get_pos_filter",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 650,
    "y": 160,
    "wires": [
      [
        "2977b2f8b41cead8"
      ]
    ]
  },
  {
    "id": "2977b2f8b41cead8",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 129",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 810,
    "y": 160,
    "wires": []
  },
  {
    "id": "920e02f39e3339c7",
    "type": "http request",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0039/get_pos_filter",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 650,
    "y": 340,
    "wires": [
      [
        "020c63f8041fcec1"
      ]
    ]
  },
  {
    "id": "020c63f8041fcec1",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 130",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 810,
    "y": 340,
    "wires": []
  },
  {
    "id": "c885625cd169de11",
    "type": "http request",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0039/get_pos_filter",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 650,
    "y": 540,
    "wires": [
      [
        "bedb1235991ec1f0"
      ]
    ]
  },
  {
    "id": "bedb1235991ec1f0",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 131",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 810,
    "y": 540,
    "wires": []
  },
  {
    "id": "5db1e5a0bd39c665",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "1층 여과압력1 데이터_CCP-1P 여과(PET)",
    "info": "*디지털 인디게이터\n제조사 : sensys\n모델명 : A1-1000",
    "x": 200,
    "y": 60,
    "wires": []
  },
  {
    "id": "013540c1d280655f",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "1층 여과압력2 데이터_CP여과",
    "info": "*디지털 인디게이터\n제조사 : sensys\n모델명 : A1-1000",
    "x": 170,
    "y": 240,
    "wires": []
  },
  {
    "id": "ca3670b1902c6ad2",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "1층 여과압력3 데이터_CCP-1P 여과(캔)",
    "info": "*디지털 인디게이터\n제조사 : sensys\n모델명 : A1-1000",
    "x": 190,
    "y": 440,
    "wires": []
  },
  {
    "id": "950ad5742575087c",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "let totalCount = msg.payload[0];   // 총 생산량\nlet status = msg.payload[2];       // 가동 상태\n\nlet prev_status = status;    // 이전 가동 상태 (현재 가동 상태와 비교하여 다를 때마다 체크)\nlet check = (prev_status != status) ? 1 : 0;  // 비교하여 다르면 1 같으면 0\nlet start_check = \"\";  // 가동 시작 체크\nlet end_check = \"\";    // 가동 종료 체크\nvar start_time = 0;   // 가동 시작 시간\nvar end_time = 0;    // 가동 종료 시간\nlet operatingTime = 0;  // 총 가동 시간\nlet dateTime = new Date();  // 현재 시간\nlet saveTimeUser = dateTime.toLocaleString();  //저장된 시간(사용자용)\n\nif (check == 1 && status == 1) { // 가동 시작 체크 : check 값이 1이면서 status 값이 1일때 시간 확인\n    start_check = \"시작\";   // 가동 상태 체크\n    start_time = dateTime.getTime();  // 가동 시작 시간 체크\n} else if (check == 1 && status == 0) { // 가동 종료 시간 : check 값이 1이면서 status 값이 0일때 시간 확인\n    end_check = \"종료\";   // 가동 상태 체크\n    end_time = dateTime.getTime();  // 가동 종료 시간 체크\n}\n\nif (start_check == \"시작\" && end_check == \"종료\") {\n    start_check = \"\"; // 변수값 초기화\n    end_check = \"\";   // 변수값 초기화\n\n    operatingTime = end_time - start_time;\n\n    let hours = Math.floor(operatingTime / 3600000);\n    let minutes = Math.floor((operatingTime % 3600000) / 60000);\n    let seconds = Math.floor((operatingTime % 60000) / 1000);\n\n    operatingTime = `${hours}시 ${minutes}분 ${seconds}초`;\n}\n\nmsg.payload = {\n    \"equipName\" : \"모노블럭 시스템\",   //장비명\n    \"totalCount\" : totalCount,        //총 생산량\n    \"status\" : status,                //가동상태\n    \"startTime\" : start_time,         //가동 시작시간\n    \"endTime\": end_time,              //가동 종료시간\n    \"operatingTime\" : operatingTime,  //가동시간\n    \"saveTimeUser\" : saveTimeUser,    //저장시간\n    \"saveTimeDB\" : dateTime           //저장시간(find용)\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 440,
    "y": 1240,
    "wires": [
      [
        "4a1573ab1532a224",
        "a358cd79b02f0d20"
      ]
    ]
  },
  {
    "id": "8e151000ede4cf6f",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "let pressure = 0;  // 에어 압력\nlet dateTime = new Date();  // 현재 시간\nlet saveDateTime = dateTime.toLocaleString();  //저장 시간\n\nif (msg.payload[0] <= 900) {\n    pressure = Math.abs((msg.payload[0] / 1000) - 0.9);\n} else {\n    pressure = msg.payload[0] / 1000;  // 에어 압력\n}\n\npressure = pressure.toFixed(1);\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"equipName\" : \"에어클리너(디씨팩)\",\n    \"ccode\": \"0039\",\n    \"scode\": \"84\",\n    \"pressure\" : pressure,\n    \"saveDateTime\": saveDateTime,      //저장 시간(사용자가 보기 편한 날짜/시간)\n    \"dateTime\": dateTime               // 저장 시간(DB find 활용)\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 440,
    "y": 1080,
    "wires": [
      [
        "cfa3c92809c069bb",
        "316120ec6a8821de",
        "6d34a1eaa3610eef"
      ]
    ]
  },
  {
    "id": "fa0d9b9c212c6ecc",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "let pressure = 0;  // 에어 압력\nlet dateTime = new Date();  // 현재 시간\nlet saveDateTime = dateTime.toLocaleString();  //저장 시간\n\nif (msg.payload[0] <= 980) {\n    pressure = Math.abs((msg.payload[0] / 10000) - 0.095);\n} else {\n    pressure = (msg.payload[0] / 10000) - 0.07;  // 에어 압력\n}\n\npressure = pressure.toFixed(2);\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"equipName\" : \"에어세척기(SK팩)\",\n    \"ccode\": \"0039\",\n    \"scode\": \"83\",\n    \"pressure\" : pressure,\n    \"saveDateTime\": saveDateTime,      //저장 시간(사용자가 보기 편한 날짜/시간)\n    \"dateTime\": dateTime               // 저장 시간(DB find 활용)\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 440,
    "y": 900,
    "wires": [
      [
        "417059960c441b37",
        "49e8edfc926697e4",
        "259f037bc85cb7e3"
      ]
    ]
  },
  {
    "id": "7bdf110d9ff41ccc",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 132",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 430,
    "y": 1040,
    "wires": []
  },
  {
    "id": "9b9f385b35d6e065",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 133",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 430,
    "y": 860,
    "wires": []
  },
  {
    "id": "259f037bc85cb7e3",
    "type": "http request",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0039/get_pos_bottle",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 610,
    "y": 960,
    "wires": [
      [
        "ca24dd312478d4e6"
      ]
    ]
  },
  {
    "id": "ca24dd312478d4e6",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 134",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 770,
    "y": 960,
    "wires": []
  },
  {
    "id": "6d34a1eaa3610eef",
    "type": "http request",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0039/get_pos_bottle",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 610,
    "y": 1140,
    "wires": [
      [
        "8eee07ef527694d3"
      ]
    ]
  },
  {
    "id": "8eee07ef527694d3",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 135",
    "active": false,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 770,
    "y": 1140,
    "wires": []
  },
  {
    "id": "344deeb164a4766c",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "globalSet",
    "func": "global.set(\"totalCount\", msg.payload[0]);  //총 생산량\nglobal.set(\"status\", msg.payload[2]);   // 현재 가동상태\n\nreturn;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 440,
    "y": 1280,
    "wires": [
      []
    ]
  },
  {
    "id": "4fa429ec5cfb8d46",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "let totalCount = msg.payload[0];   // 총 생산량\nlet status = msg.payload[2];       // 현재 가동 상태\nlet prevStatus = 0;               // 이전 가동 상태\nlet check = 0;                     // 현재 가동 상태와 이전 가동 상태 비교하여 같으면 0, 다르면 1로 체크\nlet startTime = null;   // 가동 시작 시간\nlet endTime = null;    // 가동 종료 시간\nlet operatingTime = null;  // 총 가동 시간\nlet dateTime = new Date();\n//let saveDateTime = dateTime.format('YYYY-MM-DD HH:mm:ss');\n\nif (prevStatus == status) {\n    check = 0;   // 상태가 동일하면 변경 없음\n} else {\n    check = 1;   // 상태가 변경되면 1로 설정\n    prevStatus = status;    // 현재 상태를 이전 상태 변수에 할당\n}\n\n// 상태가 변경되고, 상태가 1일 경우 작업 시작 시간 설정\nif (check == 1 && status == 1) { // 가동 시작 체크 : check 값이 1이면서 status 값이 1일때 시간 확인\n    startTime = dateTime;\n    startTime = startTime.format('YYYY-MM-DD HH:mm:ss');\n} \n\nif (check == 1 && status == 0) { // 가동 종료 시간 : check 값이 1이면서 status 값이 0일때 시간 확인\n    endTime = dateTime;\n    endTime = endTime.format('YYYY-MM-DD HH:mm:ss');\n\n    operatingTime = endTime.diff(startTime);\n    operatingTime = formatDuration(operatingTime);\n}\n\n// 밀리초를 시, 분, 초로 포맷팅\nfunction formatDuration(durationInMilliseconds) {\n    const duration = dateTime.duration(durationInMilliseconds);\n    return `${duration.hours()}시간 ${duration.minutes()}분 ${duration.seconds()}초`;\n}\n\n\nmsg.payload = {\n    \"equipName\" : \"모노블럭 시스템\",   //장비명\n    \"totalCount\" : totalCount,        //총 생산량\n    \"status\" : status,                //가동상태\n    \"startTime\": startTime,         //가동 시작시간\n    \"endTime\": endTime,              //가동 종료시간\n    \"operatingTime\": operatingTime,  //가동시간\n    //\"saveDateTime\": saveDateTime,    //저장시간\n    \"saveTimeDB\" : dateTime           //저장시간(find용)\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 440,
    "y": 1200,
    "wires": [
      []
    ]
  },
  {
    "id": "6d3c85b4d97a0a33",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "send API",
    "func": "let device_id = 1;\nlet temp = msg.payload[0].temp;\n\n\nif (msg.payload == \"error\") {\n    temp = \"\";\n} else {\n    temp = parseFloat(msg.payload[0]) / 10;\n}\n\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0039\",\n    \"kind\": \"4\",\n    \"deviceId\": device_id,\n    \"temperature\": temp\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 460,
    "y": 720,
    "wires": [
      [
        "8bd37a078f294f5a"
      ]
    ]
  },
  {
    "id": "8bd37a078f294f5a",
    "type": "http request",
    "z": "ea534a0bb0b5928e",
    "d": true,
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0039/get_temperature",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 570,
    "y": 780,
    "wires": [
      [
        "c440edde71ed2ff8"
      ]
    ]
  },
  {
    "id": "c440edde71ed2ff8",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 136",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 770,
    "y": 780,
    "wires": []
  },
  {
    "id": "9bd998258d78f08c",
    "type": "tcp in",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "server": "server",
    "host": "",
    "port": "5008",
    "datamode": "stream",
    "datatype": "buffer",
    "newline": "",
    "topic": "",
    "trim": false,
    "base64": false,
    "tls": "",
    "x": 100,
    "y": 1700,
    "wires": [
      [
        "20ee655df3dcd238",
        "43ed9e34cd100c51"
      ]
    ]
  },
  {
    "id": "4b3178c2b69b0794",
    "type": "buffer-parser",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "data": "payload",
    "dataType": "msg",
    "specification": "spec",
    "specificationType": "ui",
    "items": [
      {
        "type": "ascii",
        "name": "X",
        "offset": 0,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "제품번호",
        "offset": 1,
        "length": 3,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "상태코드",
        "offset": 4,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "계량무게",
        "offset": 6,
        "length": 7,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "정상수량",
        "offset": 14,
        "length": 6,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "과량수량",
        "offset": 20,
        "length": 4,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "미달수량",
        "offset": 24,
        "length": 4,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "금속수량",
        "offset": 28,
        "length": 4,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "Y",
        "offset": 32,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      }
    ],
    "swap1": "",
    "swap2": "",
    "swap3": "",
    "swap1Type": "swap",
    "swap2Type": "swap",
    "swap3Type": "swap",
    "msgProperty": "payload",
    "msgPropertyType": "str",
    "resultType": "value",
    "resultTypeType": "return",
    "multipleResult": false,
    "fanOutMultipleResult": false,
    "setTopic": true,
    "outputs": 1,
    "x": 150,
    "y": 1820,
    "wires": [
      [
        "52f69a337c09f4a5"
      ]
    ]
  },
  {
    "id": "e1c242c97f4ac00e",
    "type": "http request",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 610,
    "y": 1760,
    "wires": [
      [
        "e0e316f39d37306d"
      ]
    ]
  },
  {
    "id": "e0e316f39d37306d",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 137",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 770,
    "y": 1760,
    "wires": []
  },
  {
    "id": "59078268b4bf78b7",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "parsing",
    "func": "//화인_중량선별기에서는 수량 데이터를 전달해주지 않음(서버단에서 등급에 따라 수량 체크 해야됨)\nlet stx = msg.payload[0];           // STX : 통신 제어 문자(데이터의 본문 시작)\nlet product_num = msg.payload[1];   // 품번\nlet grade = msg.payload[2];         // 중량 등급(U:경량,P:정량,O:과량,M:금속)\nlet w = msg.payload[3];             // W (무슨의미인지 확인 필요)\nlet weight = msg.payload[4];        // 판정중량(소수점 포함 7byte)\nlet etx = msg.payload[5];           // ETX : 통신 제어 문자(데이터의 본문 종료)\nlet dateTime = new Date();  // 현재 시간\nlet saveDateTime = `${dateTime.getFullYear()}-${String(dateTime.getMonth() + 1).padStart(2, '0')}-${String(dateTime.getDate()).padStart(2, '0')} ${String(dateTime.getHours()).padStart(2, '0')}:${String(dateTime.getMinutes()).padStart(2, '0')}:${String(dateTime.getSeconds()).padStart(2, '0')}`;  //저장 시간\n\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0039\",\n    \"product_code\": product_num,     // 품번\n    \"status\": grade,                 // 등급\n    \"product_weight\": weight,        // 중량\n    \"date\": saveDateTime,  // 사용자가 보기 편한 날짜/시간\n    \"check_date\": dateTime  // 시간 조건 조회를 위한 키\n};\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 420,
    "y": 1700,
    "wires": [
      [
        "3427b1e3fafb80cf",
        "f02db0ada20309d5"
      ]
    ]
  },
  {
    "id": "20ee655df3dcd238",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 138",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 330,
    "y": 1660,
    "wires": []
  },
  {
    "id": "da708327721176a6",
    "type": "comment",
    "z": "ea534a0bb0b5928e",
    "name": "모든다해 중량선별기 파싱",
    "info": "",
    "x": 190,
    "y": 1780,
    "wires": []
  },
  {
    "id": "43ed9e34cd100c51",
    "type": "buffer-parser",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "data": "payload",
    "dataType": "msg",
    "specification": "spec",
    "specificationType": "ui",
    "items": [
      {
        "type": "ascii",
        "name": "STX",
        "offset": 0,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "품번",
        "offset": 1,
        "length": 2,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "등급(U:경량,P:정량,O:과량,M:금속)",
        "offset": 3,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "W",
        "offset": 4,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "판정중량(소수점 포함 7byte)",
        "offset": 5,
        "length": 7,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      },
      {
        "type": "ascii",
        "name": "ETX",
        "offset": 12,
        "length": 1,
        "offsetbit": 0,
        "scale": "1",
        "mask": ""
      }
    ],
    "swap1": "",
    "swap2": "",
    "swap3": "",
    "swap1Type": "swap",
    "swap2Type": "swap",
    "swap3Type": "swap",
    "msgProperty": "payload",
    "msgPropertyType": "str",
    "resultType": "value",
    "resultTypeType": "return",
    "multipleResult": false,
    "fanOutMultipleResult": false,
    "setTopic": true,
    "outputs": 1,
    "x": 270,
    "y": 1700,
    "wires": [
      [
        "59078268b4bf78b7"
      ]
    ]
  },
  {
    "id": "9d0b358f8c7578fa",
    "type": "require",
    "z": "ea534a0bb0b5928e",
    "name": "fs",
    "module": "fs",
    "field": "fs",
    "fieldType": "flow",
    "x": 130,
    "y": 1540,
    "wires": [
      [
        "eb4b3055d5942860"
      ]
    ]
  },
  {
    "id": "eb4b3055d5942860",
    "type": "require",
    "z": "ea534a0bb0b5928e",
    "name": "path",
    "module": "path",
    "field": "path",
    "fieldType": "flow",
    "x": 250,
    "y": 1540,
    "wires": [
      [
        "5e56275ba64b6be3"
      ]
    ]
  },
  {
    "id": "5e56275ba64b6be3",
    "type": "require",
    "z": "ea534a0bb0b5928e",
    "name": "moment",
    "module": "moment",
    "field": "moment",
    "fieldType": "flow",
    "x": 380,
    "y": 1540,
    "wires": [
      []
    ]
  },
  {
    "id": "71f80e2cbc6a2fac",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "Carmera1",
    "func": "let fs = flow.get('fs');\nlet path = flow.get('path');\nlet moment = flow.get('moment');\nlet now = moment();\nnow = now.format('YYYY-MM-DD');\n\nlet img_path = `D:/VisionLog/ImageLog/Carmera1/2024-03-15/NG`;\n\nfs.readdir(img_path, (err, files) => {\n    if (err) {\n        node.error('Error reading directory:', err);\n    }\n\n    // 파일 목록이 비어있는지 확인\n    if (files.length === 0) {\n        node.warn('No files found in the directory.');\n    }\n\n    let last_img = files[files.length - 1];\n    let last_img_path = `D:/VisionLog/ImageLog/Carmera1/2024-03-15/NG/${last_img}`;\n    \n    // 이미지 파일을 읽어서 Base64로 인코딩\n    fs.readFile(last_img_path, (err, data) => {\n        if (err) {\n            node.error('Error reading image file:', err);\n        } else {\n            // 이미지 파일을 Base64로 인코딩\n            let base64Data = data.toString('base64');\n            // Base64 인코딩된 데이터를 메시지에 추가\n            msg.payload = base64Data;\n            // 메시지를 전송\n            node.send(msg);\n        }\n    });\n});",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 1400,
    "wires": [
      [
        "8dab77f0a287d274",
        "17c8e0ed153129b3",
        "7c3cac259266c8c0"
      ]
    ]
  },
  {
    "id": "17c8e0ed153129b3",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "send api",
    "func": "let img = msg.payload;\n\nmsg.headers = {};\nmsg.headers['content-type'] = \"application/json\";\nmsg.headers['Accept'] = \"application/json\";\n\nmsg.payload = {\n    \"ccode\": \"0039\",\n    \"image\": img\n};\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 600,
    "y": 1360,
    "wires": [
      [
        "032dc4736abd545f"
      ]
    ]
  },
  {
    "id": "032dc4736abd545f",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 189",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 770,
    "y": 1320,
    "wires": []
  },
  {
    "id": "7c3cac259266c8c0",
    "type": "image",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "width": 160,
    "data": "payload",
    "dataType": "msg",
    "thumbnail": false,
    "active": true,
    "pass": false,
    "outputs": 0,
    "x": 640,
    "y": 1420,
    "wires": []
  },
  {
    "id": "40fd8d8f470179af",
    "type": "http request",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 770,
    "y": 1360,
    "wires": [
      [
        "4dfed0101d83d385"
      ]
    ]
  },
  {
    "id": "4dfed0101d83d385",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 191",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 930,
    "y": 1360,
    "wires": []
  },
  {
    "id": "8dab77f0a287d274",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 192",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 390,
    "y": 1460,
    "wires": []
  },
  {
    "id": "6d96bf8db25a8af4",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 120,
    "y": 1400,
    "wires": [
      [
        "71f80e2cbc6a2fac"
      ]
    ]
  },
  {
    "id": "79de89c599a30161",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "Carmera1",
    "func": "let fs = flow.get('fs');\nlet path = flow.get('path');\nlet moment = flow.get('moment');\nlet now = moment();\nnow = now.format('YYYY-MM-DD');\n\nlet img_path = `D:/VisionLog/ImageLog/Carmera1/${now}/NG`;\n\nfs.readdir(img_path, (err, files) => {\n    if (err) {\n        node.error('Error reading directory:', err);\n    }\n\n    // 파일 목록이 비어있는지 확인\n    if (files.length === 0) {\n        node.warn('No files found in the directory.');\n    }\n\n    let last_img = files[files.length - 1];\n    let last_img_path = `D:/VisionLog/ImageLog/Carmera1/${now}/NG/${last_img}`;\n\n    // 이미지 파일을 읽어서 Base64로 인코딩\n    fs.readFile(last_img_path, (err, data) => {\n        if (err) {\n            node.error('Error reading image file:', err);\n        } else {\n            // 이미지 파일을 Base64로 인코딩\n            let base64Data = data.toString('base64');\n            // Base64 인코딩된 데이터를 메시지에 추가\n            msg.payload = base64Data;\n            // 메시지를 전송\n            node.send(msg);\n        }\n    });\n});",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 380,
    "y": 1360,
    "wires": [
      []
    ]
  },
  {
    "id": "1e1e0e8b6871360f",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 440,
    "y": 1580,
    "wires": [
      []
    ]
  },
  {
    "id": "f9943e67fb872ffa",
    "type": "function",
    "z": "ea534a0bb0b5928e",
    "name": "function 1",
    "func": "let fs = flow.get('fs');\nlet path = flow.get('path');\nlet moment = flow.get('moment');\nlet now = moment();\nnow = now.format('YYYY-MM-DD');\n\nlet img_path = `D:/VisionLog/ImageLog/Carmera1/2024-03-15/NG`;\n\nfs.readdir(img_path, (err, files) => {\n    if (err) {\n        node.error('Error reading directory:', err);\n    }\n\n    // 파일 목록이 비어있는지 확인\n    if (files.length === 0) {\n        node.warn('No files found in the directory.');\n    }\n\n    let last_img = files[files.length - 1];\n    let last_img_path = `D:/VisionLog/ImageLog/Carmera1/2024-03-15/NG/${last_img}`;\n\n    // 이미지 파일을 읽어서 Base64로 인코딩\n    fs.readFile(last_img_path, (err, data) => {\n        if (err) {\n            node.error('Error reading image file:', err);\n        } else {\n            // 이미지 파일을 Base64로 인코딩\n            let base64Data = data.toString('base64');\n            // Base64 인코딩된 데이터를 메시지에 추가\n            msg.payload = base64Data;\n            // 메시지를 전송\n            node.send(msg);\n        }\n    });\n});",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 600,
    "y": 1580,
    "wires": [
      [
        "26c74d84b8e92c9b"
      ]
    ]
  },
  {
    "id": "26c74d84b8e92c9b",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 193",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 750,
    "y": 1580,
    "wires": []
  },
  {
    "id": "808239641475f189",
    "type": "inject",
    "z": "ea534a0bb0b5928e",
    "name": "1 sec",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "1",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 110,
    "y": 1500,
    "wires": [
      [
        "9d0b358f8c7578fa"
      ]
    ]
  },
  {
    "id": "a65df924d55418b9",
    "type": "file in",
    "z": "ea534a0bb0b5928e",
    "name": "read img",
    "filename": "D:/VisionLog/ImageLog/Camera1/2024-03-15/NG/NG_08시37분31초-319.jpg",
    "filenameType": "str",
    "format": "utf8",
    "chunk": false,
    "sendError": false,
    "encoding": "base64",
    "allProps": false,
    "x": 620,
    "y": 1540,
    "wires": [
      [
        "f2a6a98ebb76f6cf"
      ]
    ]
  },
  {
    "id": "f2a6a98ebb76f6cf",
    "type": "debug",
    "z": "ea534a0bb0b5928e",
    "name": "debug 194",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 770,
    "y": 1540,
    "wires": []
  },
  {
    "id": "62e4a209ec547825",
    "type": "mongodb in",
    "z": "88eb231280c2e9e9",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "oilTank_temp",
    "operation": "find",
    "x": 500,
    "y": 100,
    "wires": [
      [
        "06856015697b3367"
      ]
    ]
  },
  {
    "id": "06856015697b3367",
    "type": "function",
    "z": "88eb231280c2e9e9",
    "name": "send API",
    "func": "let device_id = msg.payload[0].device_id;\nlet temp = msg.payload[0].temp;\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0039\",\n    \"kind\": \"4\",\n    \"deviceId\": device_id,\n    \"temperature\": temp\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 420,
    "y": 180,
    "wires": [
      [
        "d0cb0c39f16a6ede",
        "6e4084f1b94dec35"
      ]
    ]
  },
  {
    "id": "6e4084f1b94dec35",
    "type": "debug",
    "z": "88eb231280c2e9e9",
    "name": "debug 107",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 610,
    "y": 160,
    "wires": []
  },
  {
    "id": "46978355c54fb930",
    "type": "inject",
    "z": "88eb231280c2e9e9",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "60",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 110,
    "y": 100,
    "wires": [
      [
        "8431e9b65e82db14"
      ]
    ]
  },
  {
    "id": "8431e9b65e82db14",
    "type": "function",
    "z": "88eb231280c2e9e9",
    "name": "find query",
    "func": "/* 설명\n  \"oilTank_temp\" 컬렉션에서 30초 이내에 저장된 데이터 중에 가장 최근 저장된 데이터 조회\n*/\n\nmsg.payload = {\n    \"check_date\": {\n        \"$gte\": new Date(Date.now() - 30 * 1000), // 현재 날짜 및 시간에서 30초 전의 날짜와 시간\n        \"$lte\": new Date()\n    }\n}\n\nmsg.sort = { \"check_date\": -1 }; // 내림차순 정렬\nmsg.limit = 1; // 최대 1개의 결과 반환\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 260,
    "y": 100,
    "wires": [
      [
        "62e4a209ec547825"
      ]
    ]
  },
  {
    "id": "be448e3ae59be512",
    "type": "comment",
    "z": "88eb231280c2e9e9",
    "name": "1층 팜유저장탱크 온도, 온도센서",
    "info": "*온도제어기\n-제조사 : 코노텍\n-모델명 : TP10",
    "x": 150,
    "y": 60,
    "wires": []
  },
  {
    "id": "d0cb0c39f16a6ede",
    "type": "http request",
    "z": "88eb231280c2e9e9",
    "d": true,
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "http://pc.smarthaccpman.com/smh-api/c0039/get_temperature",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 610,
    "y": 200,
    "wires": [
      [
        "87fed94f6762620a"
      ]
    ]
  },
  {
    "id": "e49d26715a52bb74",
    "type": "comment",
    "z": "88eb231280c2e9e9",
    "name": "2층_작업장, PLC3_모노블럭시스템",
    "info": "*수집 장비 : 모노블럭시스템\n*수집 항목 : 충진 및 원터치캡핑\n*수집 주기 : 발생 시",
    "x": 160,
    "y": 280,
    "wires": []
  },
  {
    "id": "7931a4a5bcacad90",
    "type": "comment",
    "z": "88eb231280c2e9e9",
    "name": "2층_작업장, PLC3_비전카메라",
    "info": "*수집 장비 : 비전카메라\n*수집 항목 : 비전카메라 이미지\n*수집 주기 : 발생 시",
    "x": 150,
    "y": 480,
    "wires": []
  },
  {
    "id": "2ec0cc819bb7b33a",
    "type": "inject",
    "z": "88eb231280c2e9e9",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 100,
    "y": 320,
    "wires": [
      [
        "199fb715cbfe6c7e"
      ]
    ]
  },
  {
    "id": "199fb715cbfe6c7e",
    "type": "function",
    "z": "88eb231280c2e9e9",
    "name": "find query",
    "func": "/* 설명\n  \"mono_block\" 컬렉션에서 30초 이내에 저장된 데이터 중에 가장 최근 저장된 데이터 조회\n*/\n\nmsg.payload = {\n    \"check_date\": {\n        \"$gte\": new Date(Date.now() - 30 * 1000), // 현재 날짜 및 시간에서 30초 전의 날짜와 시간\n        \"$lte\": new Date()\n    }\n}\n\nmsg.sort = { \"check_date\": -1 }; // 내림차순 정렬\nmsg.limit = 1; // 최대 1개의 결과 반환\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 260,
    "y": 320,
    "wires": [
      [
        "ab99c48c3dcc5f98"
      ]
    ]
  },
  {
    "id": "ab99c48c3dcc5f98",
    "type": "mongodb in",
    "z": "88eb231280c2e9e9",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "mono_block",
    "operation": "find",
    "x": 490,
    "y": 320,
    "wires": [
      [
        "bd0a0aa6fe736da8"
      ]
    ]
  },
  {
    "id": "bd0a0aa6fe736da8",
    "type": "function",
    "z": "88eb231280c2e9e9",
    "name": "send API",
    "func": "let device_id = msg.payload[0].payload.device_id;\nlet mono_block = msg.payload[0].payload.mono_block;\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0039\",\n    \"scode\": \"\",\n    \"kind\": \"\",\n    \"deviceId\": device_id,\n    \"mono_block\": mono_block\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 420,
    "y": 400,
    "wires": [
      [
        "1e6fc0fa375b6dfb",
        "ef575d6e8444342c"
      ]
    ]
  },
  {
    "id": "ef575d6e8444342c",
    "type": "debug",
    "z": "88eb231280c2e9e9",
    "name": "debug 119",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 610,
    "y": 380,
    "wires": []
  },
  {
    "id": "1e6fc0fa375b6dfb",
    "type": "http request",
    "z": "88eb231280c2e9e9",
    "d": true,
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 610,
    "y": 420,
    "wires": [
      []
    ]
  },
  {
    "id": "8792e36a87888b61",
    "type": "inject",
    "z": "88eb231280c2e9e9",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 100,
    "y": 520,
    "wires": [
      [
        "d38451a7237e596f"
      ]
    ]
  },
  {
    "id": "d38451a7237e596f",
    "type": "function",
    "z": "88eb231280c2e9e9",
    "name": "find query",
    "func": "/* 설명\n  \"vision_camera\" 컬렉션에서 30초 이내에 저장된 데이터 중에 가장 최근 저장된 데이터 조회\n*/\n\nmsg.payload = {\n    \"check_date\": {\n        \"$gte\": new Date(Date.now() - 30 * 1000), // 현재 날짜 및 시간에서 30초 전의 날짜와 시간\n        \"$lte\": new Date()\n    }\n}\n\nmsg.sort = { \"check_date\": -1 }; // 내림차순 정렬\nmsg.limit = 1; // 최대 1개의 결과 반환\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 260,
    "y": 520,
    "wires": [
      [
        "d2b504bd7d78514a"
      ]
    ]
  },
  {
    "id": "d2b504bd7d78514a",
    "type": "mongodb in",
    "z": "88eb231280c2e9e9",
    "mongodb": "da28b1d93eba7f99",
    "name": "",
    "collection": "vision_camera",
    "operation": "find",
    "x": 500,
    "y": 520,
    "wires": [
      [
        "87c83b29db901821"
      ]
    ]
  },
  {
    "id": "87c83b29db901821",
    "type": "function",
    "z": "88eb231280c2e9e9",
    "name": "send API",
    "func": "let device_id = msg.payload[0].payload.device_id;\nlet vision_camera = msg.payload[0].payload.vision_camera;\n\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/json';\nmsg.headers['Accept'] = 'application/json';\n\nmsg.payload = {\n    \"ccode\": \"0039\",\n    \"scode\": \"\",\n    \"kind\": \"\",\n    \"deviceId\": device_id,\n    \"vision_camera\": vision_camera\n}\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 420,
    "y": 600,
    "wires": [
      [
        "8738935fc18bd06b",
        "2a4538a35530d8a4"
      ]
    ]
  },
  {
    "id": "2a4538a35530d8a4",
    "type": "debug",
    "z": "88eb231280c2e9e9",
    "name": "debug 120",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 610,
    "y": 580,
    "wires": []
  },
  {
    "id": "8738935fc18bd06b",
    "type": "http request",
    "z": "88eb231280c2e9e9",
    "d": true,
    "name": "",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "",
    "senderr": false,
    "headers": [],
    "x": 610,
    "y": 620,
    "wires": [
      []
    ]
  },
  {
    "id": "87fed94f6762620a",
    "type": "debug",
    "z": "88eb231280c2e9e9",
    "name": "debug 128",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "false",
    "statusVal": "",
    "statusType": "auto",
    "x": 790,
    "y": 200,
    "wires": []
  },
  {
    "id": "aaac308e8171396f",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 100,
    "wires": [
      [
        "237fc5c01c1f19ce"
      ]
    ]
  },
  {
    "id": "237fc5c01c1f19ce",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"filter_pressure1\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 100,
    "wires": [
      [
        "bed1f4f4a3cc5a5d"
      ]
    ]
  },
  {
    "id": "bed1f4f4a3cc5a5d",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "filter_pressure1",
    "collection": "filter_pressure1",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 500,
    "y": 100,
    "wires": []
  },
  {
    "id": "94e1c81f07a7c396",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "filter_pressure1 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 250,
    "y": 60,
    "wires": []
  },
  {
    "id": "277b8b35978965fe",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"filter_pressure2\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 200,
    "wires": [
      [
        "09e37fd9b52d2a59"
      ]
    ]
  },
  {
    "id": "09e37fd9b52d2a59",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "filter_pressure2",
    "collection": "filter_pressure2",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 500,
    "y": 200,
    "wires": []
  },
  {
    "id": "7fb83c933b17d5e7",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "filter_pressure2 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 250,
    "y": 160,
    "wires": []
  },
  {
    "id": "e03f38f75d002ee8",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"filter_pressure3\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 300,
    "wires": [
      [
        "2a5c36fbe5ccd852"
      ]
    ]
  },
  {
    "id": "2a5c36fbe5ccd852",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "filter_pressure3",
    "collection": "filter_pressure3",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 500,
    "y": 300,
    "wires": []
  },
  {
    "id": "566eeb53885683d0",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "filter_pressure3 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 250,
    "y": 260,
    "wires": []
  },
  {
    "id": "44921ae6224d29d1",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"oilTank_temp\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 400,
    "wires": [
      [
        "5af5e4dca2b1590e"
      ]
    ]
  },
  {
    "id": "5af5e4dca2b1590e",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "oilTank_temp",
    "collection": "oilTank_temp",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 490,
    "y": 400,
    "wires": []
  },
  {
    "id": "00de505b61c60d74",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "oilTank_temp 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 240,
    "y": 360,
    "wires": []
  },
  {
    "id": "35e58d40651c01c9",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 200,
    "wires": [
      [
        "277b8b35978965fe"
      ]
    ]
  },
  {
    "id": "03c894fd82594ca0",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 300,
    "wires": [
      [
        "e03f38f75d002ee8"
      ]
    ]
  },
  {
    "id": "f692a5c58210372d",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 400,
    "wires": [
      [
        "44921ae6224d29d1"
      ]
    ]
  },
  {
    "id": "1fd053c60283cf1b",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"air_cleaner\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 500,
    "wires": [
      [
        "20131f91cc78c0d6"
      ]
    ]
  },
  {
    "id": "20131f91cc78c0d6",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "air_cleaner",
    "collection": "air_cleaner",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 490,
    "y": 500,
    "wires": []
  },
  {
    "id": "5ad9b56b807180a4",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "air_cleaner 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 230,
    "y": 460,
    "wires": []
  },
  {
    "id": "ddb690aacad02897",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 500,
    "wires": [
      [
        "1fd053c60283cf1b"
      ]
    ]
  },
  {
    "id": "306a73e0e0460178",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"air_washer\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 600,
    "wires": [
      [
        "4dfb19475141b3be"
      ]
    ]
  },
  {
    "id": "4dfb19475141b3be",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "air_washer",
    "collection": "air_washer",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 490,
    "y": 600,
    "wires": []
  },
  {
    "id": "b7be0477b8b1c15f",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "air_washer 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 230,
    "y": 560,
    "wires": []
  },
  {
    "id": "2419fb1f6603f686",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 600,
    "wires": [
      [
        "306a73e0e0460178"
      ]
    ]
  },
  {
    "id": "ff101d9408631fbc",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"mono_block\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 700,
    "wires": [
      [
        "99eb872f6b648359"
      ]
    ]
  },
  {
    "id": "99eb872f6b648359",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "mono_block",
    "collection": "mono_block",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 490,
    "y": 700,
    "wires": []
  },
  {
    "id": "252ddf260821975d",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "mono_block 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 240,
    "y": 660,
    "wires": []
  },
  {
    "id": "d0cf2c8832ee0734",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 700,
    "wires": [
      [
        "ff101d9408631fbc"
      ]
    ]
  },
  {
    "id": "32167957b43a371c",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"vision_camera\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 800,
    "wires": [
      [
        "c2de04ba28bff368"
      ]
    ]
  },
  {
    "id": "c2de04ba28bff368",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "vision_camera",
    "collection": "vision_camera",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 500,
    "y": 800,
    "wires": []
  },
  {
    "id": "c155b8dff183eda4",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "vision_camera 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 250,
    "y": 760,
    "wires": []
  },
  {
    "id": "cf4241aeef874c53",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "d": true,
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 800,
    "wires": [
      [
        "32167957b43a371c"
      ]
    ]
  },
  {
    "id": "cdeb7d46df7dee15",
    "type": "function",
    "z": "34cbadba494cdf22",
    "name": "remove query",
    "func": "let remove_date = {};\nremove_date.collection = \"weight_checker\";\n\nreturn remove_date;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 300,
    "y": 900,
    "wires": [
      [
        "31a2d4376a5ff093"
      ]
    ]
  },
  {
    "id": "31a2d4376a5ff093",
    "type": "mongodb out",
    "z": "34cbadba494cdf22",
    "mongodb": "da28b1d93eba7f99",
    "name": "weight_checker",
    "collection": "weight_checker",
    "payonly": false,
    "upsert": false,
    "multi": false,
    "operation": "delete",
    "x": 500,
    "y": 900,
    "wires": []
  },
  {
    "id": "32bd48ba603bea72",
    "type": "comment",
    "z": "34cbadba494cdf22",
    "name": "weight_checker 컬렉션 데이터 삭제(매주 일요일 오전9시)",
    "info": "",
    "x": 250,
    "y": 860,
    "wires": []
  },
  {
    "id": "fb00845007e83a27",
    "type": "inject",
    "z": "34cbadba494cdf22",
    "d": true,
    "name": "",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 09 * * 0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "x": 130,
    "y": 900,
    "wires": [
      [
        "cdeb7d46df7dee15"
      ]
    ]
  }
]